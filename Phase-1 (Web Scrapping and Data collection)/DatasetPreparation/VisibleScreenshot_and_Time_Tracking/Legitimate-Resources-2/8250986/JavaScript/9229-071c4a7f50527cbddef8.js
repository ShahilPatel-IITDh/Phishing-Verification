"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[9229],{28566:(e,t,n)=>{n.d(t,{d:()=>p});var r=n(1225),a=n(91626),l=n(65171),i=n(83146),c=n(20997),o=n(52799),s=n(37010),u=n(85602),m=n(617),d=n(56258),_=n(51120);const p=r.forwardRef((({product:e,purchase:t,discountCode:n,selection:p,label:g,onClick:v},h)=>{var E;const{searchParams:y}=new URL((0,u.M)()),[f,w]=r.useState("");(0,m.e)((()=>w(document.referrer)));const{selectedOption:b,pppDiscounted:k}=(0,s.w0)(e,(null==n?void 0:n.valid)?n.discount:null,p),C=new URL(d.checkout_index_url()),N={a:"affiliate_id"};for(const[e,t]of y.entries())["product","option","recurrence","quantity","rent","price","code","referrer"].includes(e)||C.searchParams.set(null!=(E=N[e])?E:e,t);if(C.searchParams.set("product",e.permalink),p.optionId&&C.searchParams.set("option",p.optionId),p.recurrence&&C.searchParams.set("recurrence",p.recurrence),C.searchParams.set("quantity",p.quantity.toString()),p.rent&&C.searchParams.set("rent","true"),(e.pwyw||(null==b?void 0:b.is_pwyw))&&null!=p.price.value){let t=p.price.value;k&&e.ppp_details?t/=e.ppp_details.factor:(null==n?void 0:n.valid)&&(0,s.Ug)(n.discount,p.quantity)&&("percent"===n.discount.type?t/=(100-n.discount.percents)/100:t+=n.discount.cents),C.searchParams.set("price",Math.round(t).toString())}(null==n?void 0:n.valid)&&(0,s.Ug)(n.discount,p.quantity)&&!k&&C.searchParams.set("code",n.code);const P=y.get("referrer")||f||null;return P&&C.searchParams.set("referrer",P),(0,o._w)(e)?null:r.createElement(c.W,{ref:h,target:"_top",href:C.toString(),color:"primary",onClick:t=>{null==v||v(t),t.defaultPrevented||(e.seller&&(0,i.n4)(e.seller.id,{permalink:e.permalink,action:"iwantthis",product_name:e.name}),(0,a.H)({name:"i_want_this",permalink:e.permalink,fromOverlay:(0,o.Sq)(y),wasRecommended:(0,o.bR)(y)}).catch(l.wN))},style:{alignItems:"unset"}},null!=g?g:_.t(t?"js.purchase_again":e.recurrences?"subscribe_prompt":p.rent?"rent":e.custom_button_text_option?e.custom_button_text_option:"i_want_this_prompt"))}));p.displayName="CtaButton"},52799:(e,t,n)=>{n.d(t,{xs:()=>$,QK:()=>A,Sq:()=>M,_w:()=>D,bR:()=>I});var r=n(373),a=n(1225),l=n(5383),i=n(91626),c=n(34605),o=n(53719),s=n(6351),u=n(60281),m=n(65171),d=n(20997),_=n(62338),p=n(69846),g=n(17636),v=n(99812),h=n(37010),E=n(67344),y=n(28566),f=n(68918),w=n(42058),b=n(66960),k=n(617);const C=e=>(null!=e?e:0).toString().padStart(2,"0"),N=e=>{const{days:t,hours:n,minutes:r,seconds:a}=e;let l="";return t&&(l+=`${C(t)}:`),(t||n)&&(l+=`${C(n)}:`),l+=`${C(r)}:${C(a)}`,l},P=({onExpiration:e,expiresAt:t})=>{const[n,r]=a.useState((t.getTime()-(new Date).getTime())/1e3);return(0,k.e)((()=>{n<=0&&e(),new w.Z(n,r,e)})),n>604800?null:a.createElement("div",null,a.createElement(b.v,{string:"offer_code_expiration_countdown",reactParams:{duration:a.createElement("strong",{suppressHydrationWarning:!0},N((0,f.Z)({start:0,end:1e3*n})))}}))};var S=n(68250),x=n(98323),q=n(87127),R=n(19176),T=n(82783),L=n(85602),U=n(51120);const I=e=>!!e.get("recommended_by"),M=e=>"true"===e.get("overlay"),D=e=>e.is_compliance_blocked?U.t("territory_blocked"):0===e.quantity_remaining?U.t("sold_out"):e.is_published?null:U.t("not_for_sale_notice"),$=({product:e,purchase:t,discountCode:n,ctaLabel:l,selection:i,setSelection:s,ctaButtonRef:u})=>{var m,d,_,p;const[g,E]=a.useState(!1);(0,k.e)((()=>E(!0)));const f=(0,R._A)({initialValue:g?e.description_html:null,editable:!1}),w=D(e),[C,N]=a.useState(n),{basePriceCents:x,priceCents:q,discountedPriceCents:T,pppDiscounted:L,isPWYW:I}=(0,h.w0)(e,(null==C?void 0:C.valid)?C.discount:null,i);return a.createElement("article",{className:"product"},a.createElement(F,{covers:e.covers,mainCoverId:e.main_cover_id}),null!==e.quantity_remaining?a.createElement("div",{className:"ribbon"},U.t("js.left_with_count",{count:e.quantity_remaining})):null,a.createElement("section",null,a.createElement("header",null,a.createElement("h1",{itemProp:"name"},e.name)),a.createElement("section",{className:"details"},e.recurrences||0!==e.options.length||(null==(m=e.rental)?void 0:m.rent_only)||0===x&&!e.pwyw?null:a.createElement(S.W,{currencyCode:e.currency_code,oldPrice:T<x?x:void 0,price:T,url:e.long_url,isPayWhatYouWant:!!e.pwyw,isSalesLimited:e.is_sales_limited}),e.seller?a.createElement(v.y,{name:e.seller.name,profileUrl:e.seller.profile_url,avatarUrl:e.seller.avatar_url}):null,null!=e.rating_counts?a.createElement(A,{ratingCounts:e.rating_counts}):null),null!==t?a.createElement(W,{purchase:t,permalink:e.permalink,isPreorder:null!==e.preorder,isCustomDelivery:e.is_custom_delivery,customViewContentButtonText:e.custom_view_content_button_text}):null,a.createElement("section",null,g?a.createElement(r.kg,{className:"rich-text",editor:f}):a.createElement("div",{className:"rich-text",dangerouslySetInnerHTML:{__html:null!=(d=e.description_html)?d:""}}))),a.createElement("section",null,a.createElement("section",null,w?a.createElement("div",{role:"status",className:"warning"},w):null,C?C.valid?(T<q||C.discount.minimum_quantity)&&!L?a.createElement("div",{role:"status",className:"success"},a.createElement("div",{className:"paragraphs"},C.discount.minimum_quantity?U.t("discount_code_minimum_quantity_notice",{amount:"percent"===C.discount.type?`${C.discount.percents}%`:(0,c.Nq)(e.currency_code,C.discount.cents,{symbolFormat:"long"}),quantity:C.discount.minimum_quantity,name:C.code.toUpperCase()}):"percent"===C.discount.type?U.t("discount_code_percent_notice",{percent:C.discount.percents,name:C.code.toUpperCase()}):U.t("discount_code_absolute_notice",{amount:(0,c.Nq)(e.currency_code,C.discount.cents,{symbolFormat:"long"}),name:C.code.toUpperCase()}),C.discount.duration_in_billing_cycles&&e.is_tiered_membership?a.createElement("div",null,U.t("discount_code_duration_notice",{count:C.discount.duration_in_billing_cycles})):null,C.discount.minimum_amount_cents?a.createElement("div",null,U.t(1===(null!=(p=null==(_=C.discount.product_ids)?void 0:_.length)?p:0)?"discount_code_minimum_amount_single_product_notice":"discount_code_minimum_amount_notice",{product_type:!C.discount.product_ids&&e.seller?`${e.seller.name}'s`:U.t("selected"),amount:(0,c.Nq)(e.currency_code,C.discount.minimum_amount_cents,{symbolFormat:"short"})})):null,C.discount.expires_at?a.createElement(P,{expiresAt:new Date(C.discount.expires_at),onExpiration:()=>N({valid:!1,error_code:"inactive"})}):null)):null:a.createElement("div",{role:"status",className:"danger"},"sold_out"===C.error_code?U.t("offer_code_sold_out"):"invalid_offer"===C.error_code?U.t("offer_code_invalid"):U.t("offer_code_inactive")):null,a.createElement(h.et,{product:e,selection:i,setSelection:s,discount:(null==C?void 0:C.valid)?C.discount:null}),e.ppp_details&&L?a.createElement("div",{role:"status",className:"info"},a.createElement("div",null,a.createElement(b.v,{string:"ppp_notice",reactParams:{country:a.createElement("b",null,e.ppp_details.country),percent:a.createElement("b",null,(Math.round(100*(1-T/q))/100).toLocaleString(void 0,{style:"percent"})),price:a.createElement("b",null,(0,c.Nq)(e.currency_code,T,{symbolFormat:"long"}))}}),(null==C?void 0:C.valid)?` ${U.t("ppp_greater_than_offer_code_alert")}`:null)):null,e.free_trial?a.createElement("div",{role:"status",className:"info"},U.t("product_free_trial_notice",{freeTrialDurationUnit:U.t(`free_trial_duration_units_for_notice.${e.free_trial.duration.unit}`,{count:e.free_trial.duration.amount}),freeTrialDurationAmount:e.free_trial.duration.amount})):null,e.duration_in_months?a.createElement("div",{role:"status",className:"info"},U.t("fixed_length_membership_notice",{duration:U.t("duration.month",{count:e.duration_in_months})})):null,a.createElement(y.d,{ref:u,product:e,purchase:t,discountCode:null!=C?C:null,selection:i,label:l,onClick:e=>{I&&(null===i.price.value||i.price.value<T)&&(s({...i,price:{...i.price,error:!0}}),1)&&e.preventDefault()}}),null!==e.sales_count?a.createElement("div",{role:"status",className:"info"},a.createElement("span",{dangerouslySetInnerHTML:{__html:U.t(e.recurrences?"js.subscribers_unit":e.preorder?"js.preorders_unit":e.price_cents>0||e.options.length>0?"js.sales_unit":"js.downloads_unit",{count:e.sales_count,formatted_count:e.sales_count.toLocaleString(U.locale)})}})):null,e.preorder?a.createElement("div",{role:"status",className:"info"},U.t("release_date",{date:(0,o.p)(e.preorder.release_date)})):null,e.is_stream_only?a.createElement("div",{role:"status",className:"info"},U.t("no_download_warning")):null,e.refund_policy?a.createElement(B,{refundPolicy:e.refund_policy,permalink:e.permalink}):null,e.summary||e.attributes.length>0?a.createElement("div",{className:"stack"},e.summary?a.createElement("p",null,e.summary):null,e.attributes.map((({name:e,value:t},n)=>a.createElement("div",{key:n},a.createElement("h5",null,e),a.createElement("div",null,t))))):null),e.rating_counts?a.createElement(H,{ratingCounts:e.rating_counts}):null))},F=({covers:e,mainCoverId:t})=>{const[n,r]=a.useState(t);return(0,T.p)((()=>r(t)),[t]),a.createElement(E.J,{covers:e,activeCoverId:n,setActiveCoverId:r,style:{paddingBottom:n?void 0:"25%"}})},W=({permalink:e,isPreorder:t,isCustomDelivery:n,customViewContentButtonText:r,purchase:c})=>{var o;const s=(0,_.Z)(),{searchParams:p}=new URL((0,L.M)()),g=c.show_view_content_button_on_product_page?a.createElement(d.W,{color:"primary",href:null!=(o=n?c.custom_delivery_url:c.content_url)?o:"",target:"_blank",onClick:()=>{(0,i.H)({name:n?"product_information_click_custom_delivery_url":"product_information_view_product",permalink:e,fromOverlay:M(p),wasRecommended:I(p)}).catch(m.wN)}},null!=r?r:U.t("view_content")):null,[v,h]=a.useState(c.product_rating),E=(0,u.x)((async t=>{if(t!==v)try{await(0,l.d)({permalink:e,purchaseId:c.id,rating:t}),h(t),s(U.t("js.product_rated"),"success")}catch(e){(0,m.wN)(e),s(e.message,"error")}}));return c.should_show_receipt?a.createElement("section",null,a.createElement("div",{className:"stack"},c.membership?a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("h5",null,c.membership.tier_name),c.total_price_including_tax_and_shipping),a.createElement("div",null,a.createElement(d.W,{href:c.membership.manage_url,target:"_blank",onClick:()=>{(0,i.H)({name:"product_information_manage_membership",permalink:e,fromOverlay:M(p),wasRecommended:I(p)}).catch(m.wN)}},U.t(c.subscription_has_lapsed?"restart_membership":"manage_membership")),g)):a.createElement("li",null,a.createElement("h3",null,c.is_gift_receiver_purchase?U.t("already_bought_notice_received_gift"):U.t("already_bought_notice")),g),t?null:a.createElement("div",null,a.createElement("div",null,null!==v&&v>0?U.t("your_rating"):U.t("liked_it_give_it_a_rating")),a.createElement(x.w,{currentRating:v,onChangeCurrentRating:E})))):null},j=({rating:e,percentage:t})=>{const n=`${t}%`;return a.createElement(a.Fragment,null,a.createElement("div",null,U.t("stars",{count:e})),a.createElement("meter",{"aria-label":U.t("stars",{count:e}),value:t/100}),a.createElement("div",null,n))},H=({ratingCounts:e})=>{const t=e.reduce(((e,t)=>e+t));if(0===t)return null;const n=e.reduce(((e,t,n)=>e+t*(n+1)))/t,r=(e=>{const t=e.map(((e,t)=>[t,e%1])).sort(((e,t)=>t[1]-e[1]||t[0]-e[0])),n=Math.round(t.reduce(((e,t)=>e+t[1]),0)),r=t.slice(0,n).map((e=>e[0]));return e.map(((e,t)=>Math.floor(e)+Number(r.includes(t))))})(e.map((e=>e/t*100)));return a.createElement("section",null,a.createElement("header",null,a.createElement("h3",null,U.t("ratings")),a.createElement("div",{className:"rating"},a.createElement(p.J,{name:"solid-star"}),a.createElement("div",{className:"rating-average"},n.toFixed(1)),"(",U.t("js.ratings_count",{count:t,formatted_count:(0,s.p)(t,1)}),")")),a.createElement("div",{itemProp:"aggregateRating",itemType:"https://schema.org/AggregateRating",itemScope:!0,hidden:!0},a.createElement("div",{itemProp:"reviewCount"},t),a.createElement("div",{itemProp:"ratingValue"},n.toFixed(1))),a.createElement("section",{className:"histogram","aria-label":U.t("ratings_histogram")},[4,3,2,1,0].map((e=>a.createElement(j,{rating:e+1,percentage:r[e],key:e})))))},A=({ratingCounts:e})=>{const t=e.reduce(((e,t)=>e+t));return a.createElement("div",{className:"rating"},a.createElement(q.T,{rating:e.reduce(((e,t,n)=>e+t*(n+1)))/t}),a.createElement("span",{className:"rating-number"},U.t("ratings_count",{count:t})))},B=({refundPolicy:e,permalink:t})=>{const n="#refund-policy",[r,l]=a.useState(!1),{searchParams:c}=new URL((0,L.M)());(0,k.e)((()=>{l(window.location.hash===n)})),a.useEffect((()=>{r&&(0,i.H)({name:"product_refund_policy_fine_print_view",permalink:t,fromOverlay:M(c),wasRecommended:I(c),isModal:!0})}),[r]);const o=new Date(e.updated_at).toLocaleString(U.locale,{dateStyle:"medium"}),s=U.t("last_updated",{date:o});return a.createElement(a.Fragment,null,a.createElement("div",{style:{textAlign:"center"}},e.fine_print?a.createElement("a",{href:n,onClick:()=>l(!0)},e.title):e.title),e.fine_print?a.createElement(g.u,{open:r,onClose:()=>{l(!1),window.history.replaceState(window.history.state,"",window.location.href.split("#")[0])},title:e.title,footer:a.createElement("p",null,s)},a.createElement("div",{className:"paragraphs"},a.createElement("div",{dangerouslySetInnerHTML:{__html:`${e.fine_print}`},style:{display:"contents"}}))):null)}}}]);