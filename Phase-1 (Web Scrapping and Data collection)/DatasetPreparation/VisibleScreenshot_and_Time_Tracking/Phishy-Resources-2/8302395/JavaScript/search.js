document.addEventListener("readystatechange",(e=>{"complete"===e.target.readyState&&function(){const e=document.getElementById("search-results"),t=document.getElementById("search"),n=document.querySelector(".nav-search "),a=document.querySelector(".nav-searchbar-wrap");n&&t&&(n.addEventListener("click",(()=>{window.innerWidth>991&&a.classList.toggle("searchbar--active")})),window.addEventListener("click",(e=>{!function(e){const n=a.contains(e.target),s=e.target.classList.contains("search-icon"),c=e.target===t,r=a.classList.contains("searchbar--active");n||s||c||!r?c&&t.classList.add("input--active"):a.classList.remove("searchbar--active")}(e)})),t.addEventListener("input",function(e,t=300){let n;return(...a)=>{clearTimeout(n),n=setTimeout((()=>{e.apply(this,a)}),t)}}((t=>{const n=t.target.value,a=RegExp("[0-9A-Za-z-+$™®©% '()]{3,256}").exec(n),s=a?a[0]:"";if(s.length>2){const t=encodeURIComponent(s);fetch(`/the-ascent/search/partial/?q=${t}`,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((t=>{t.text().then((t=>{""===t.trim()?e.style.display="none":(e.innerHTML=t,e.style.display="block")}))}))}else e.style.display="none"}))),a.addEventListener("keydown",(t=>{"Escape"!==t.key&&"Esc"!==t.key||(e.style.display="none",a.classList.remove("searchbar--active"),document.activeElement.blur())})),t.addEventListener("keydown",(e=>{if("Enter"===e.key){const e=t.value,n=document.getElementById("show-more-link");window.location=n?n.href:`/the-ascent/search/?q=${encodeURIComponent(e)}`}})),document.body.addEventListener("click",(t=>{(function(e,t){let n=e.target;do{if(n===t)return!1;n=n.parentNode}while(n);return!0})(t,document.getElementsByClassName("search-bar-main")[0])&&(e.style.display="none")})))}()}));