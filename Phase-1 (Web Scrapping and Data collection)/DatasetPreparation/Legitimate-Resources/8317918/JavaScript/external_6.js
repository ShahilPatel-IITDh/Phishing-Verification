var gdpr=function(e){"use strict";const t=e=>e.replace(/.*\.([^.]*[^0-9][^.]*\.[^.]*[^.0-9][^.]*$)/,"$1"),n=e=>{const t=window.location.href,n=new RegExp(`[\\?&]${e}=?([^&#]*)?`).exec(t);return null!==n&&n[1]},o=(e,t)=>"object"==typeof t&&t.indexOf(e)>-1,r={info:"#015e7a",warning:"#7a5901",error:"#7a1d01"},i=()=>(window.lmd||{}).hasOwnProperty("debug")?!!window.lmd.debug:!1!==n("gdpr_debug"),s=(e,t)=>{"object"!=typeof e&&(e=[e]);const n=r[t]||"#222",o="info"===t?"log":t;console&&"function"==typeof console[o]&&i()&&console[o]("%cGDPR",`display: inline-block; color: #ffffff; background: ${n}; font-weight: 600; padding: 1px 4px; border-radius: 3px;`,...e)},a=e=>(e=>{"verbose"===n("gdpr_debug")&&s(e,"info")})(e),c=e=>s(e,"info"),u=e=>s(e,"error"),l=e=>s(e,"warning"),p=(e,t)=>(Object.keys(t).forEach((n=>{void 0===e[n]?e[n]=t[n]:typeof t[n]!=typeof e[n]?l(`bad configuration type for ${n}, must be an instance of ${typeof e[n]}`):"object"==typeof t[n]?p(e[n],t[n]):e[n]=t[n]})),e),d={identifier:"default",displayMode:"standard",entryPoint:null,cookiePrefix:"",lang:"fr",hosts:{cmp:`cmp.${t(document.location.hostname)}`},abtests:{token:!1,defaultToken:100,variants:[],variantName:""},content:{paramsRefresh:!0},modules:{parameters:{name:"gdpr-glm-params",css:"/css/default/parameters.min.css",tpl:"/html/default/parameters.html"},partners:{name:"gdpr-glm-partners",css:"/css/default/partners.min.css",tpl:"/html/default/partners.html"},standard:{name:"gdpr-glm-standard",css:"/css/default/standard.min.css",tpl:"/html/default/standard.html"},amp_main:{name:"gdpr-glm-amp",css:"/css/default/amp.min.css",tpl:"/html/default/main-amp.html"},amp_frame:{name:"gdpr-glm-frame",css:"/css/default/frame.min.css",tpl:"/html/default/frame-amp.html"}},setTemplate:e=>{void 0!==d.modules[d.displayMode]&&(d.modules[d.displayMode].tpl=e)},setEntryPoint:e=>{d.entryPoint=e},override:e=>{Object.keys(e).forEach((t=>{void 0===d[t]?d[t]=e[t]:typeof e[t]!=typeof d[t]?l(`bad configuration type for ${t}, must be an instance of ${typeof d[t]}`):"object"==typeof e[t]?p(d[t],e[t]):d[t]=e[t]}))},overrideFromQueryString:()=>{!1!==n("gdpr_displayMode")&&(d.displayMode=n("gdpr_displayMode")),!1!==n("gdpr_acceptAll")&&(d.consent={lmdConsent:{purposes:{ads:!0,analytics:!0,personalization:!0,mediaPlatforms:!0,social:!0}},consentString:"CPZe5vhPZe5vhFzABBFRBdCgAP_AAH_AAAqIH7Nf_X__b3_n-_79__t0eY1f9_7_v-0zjhfdt-8N2f_X_L8X_2M7vF36pr4KuR4ku3bBIQdtHOncTUmx6olVrTPsbk2Mr7NKJ7Pkmnsbe2dYGH9_n93T_ZKZ7______7________________________-_____9____________wP2AJMNS-AC7EscGSaNKoUQIQrCQ6AUAFFAMLRNYQMrgp2VwEeoIGACE1ARgRAgxBRiwCAAQCAJCIgJADwQCIAiAQAAgBUgIQAEbAILACwMAgAFANCxAigCECQgyOCo5TAgIkWignsrAEou9jTCEMosAKBR_RUYCJQggWBkJCwcxgAA"}),!1!==n("gdpr_denyAll")&&(d.consent={lmdConsent:{purposes:{ads:!1,analytics:!1,personalization:!1,mediaPlatforms:!1,social:!1}},consentString:"CPZe57IPZe57IFzABCFRBdCgAAAAAAAAAAAAAAAAAAAA"}),!1!==n("gdpr_greenframe")&&(d.consent={lmdConsent:{purposes:{ads:!1,analytics:!0,personalization:!0,mediaPlatforms:!0,social:!0}},consentString:"CPZe57IPZe57IFzABCFRBdCgAAAAAAAAAAAAAAAAAAAA"})},overrideFromSite:()=>{d.override(window.GDPR_CONFIG||{}),d.overrideFromQueryString(),void 0!==d.tpl&&d.setTemplate(d.tpl)}},f=()=>(a("[Piano] should use Piano ? "+(!0===window?.GDPR_CONFIG?.usePiano?"true":"false")),!0===window?.GDPR_CONFIG?.usePiano),h={identifier:"huffpost",displayMode:"cookiewall",hosts:{cmp:new URL(document.currentScript.src||"").hostname},blacklistedPath:["/static/mentions-legales","/static/conditions-generales","/static/conditions-generales-de-vente","/static/charte-de-confidentialite","/static/a-propos-de-nous","/static/nous-contacter"],abtests:{token:!1,defaultToken:100,variants:[]},content:{siteName:"Le HuffPost",aName:"au HuffPost",deName:"du HuffPost",policyUrl:"https://www.huffingtonpost.fr/static/charte-de-confidentialite",vendors:{analytics:["Comscore","Google Analytics"],social:["Pinterest","Twitter","Instagram"],personalization:["Batch"]}},modules:{parameters:{name:"gdpr-hfp-params",css:"/css/huffpost/parameters.min.css",tpl:"/html/huffpost/parameters.html"},partners:{name:"gdpr-glm-partners",css:"/css/default/partners.min.css",tpl:"/html/default/partners.html"},standard:{name:"gdpr-glm-standard",css:"/css/huffpost/standard.min.css",tpl:"/html/huffpost/standard.html"},cookiewall:{name:"gdpr-hfp-wall",css:"/css/huffpost/wall-large.min.css",tpl:"/html/huffpost/wall-large.html"},subscriber:{name:"gdpr-hfp-subscriber",css:"/css/huffpost/subscriber.min.css",tpl:"/html/huffpost/subscriber.html"},remove:{name:"gdpr-hfp-remove",css:"/css/huffpost/remove.min.css",tpl:"/html/huffpost/remove.html"}}},m=(e,t)=>{const n=Element.prototype;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||(e=>-1!==[].indexOf.call(document.querySelectorAll(e),window))).call(e,t)};var g=m;const y=(e,t,n,o)=>{e.addEventListener(t,(e=>{e.target&&g(e.target,n)&&o(e)}))};function v(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{e()})):e()}const b="data-popin-toggle-target",_="data-popin-toggle-scope",E="ui-collapse--shown",C=e=>{const t=(e=>e.hasAttribute(_)?document.querySelector(e.getAttribute(_)):e.parentNode)(e),n=((e,t)=>!!e.hasAttribute(b)&&t.querySelectorAll(e.getAttribute(b)))(e,t);if(e.classList.toggle(E),n&&n.length>0)for(let e=0;e<n.length;e+=1)n[e].classList.toggle(E)};function w(){return window.ATInternet&&window.ATInternet.Tracker&&Array.isArray(window.ATInternet.Tracker.instances)&&1===window.ATInternet.Tracker.instances.length?window.ATInternet.Tracker.instances[0]:null}function A(e){(function(){if(S())return window.cmpDataLayer;return window.cmpDataLayer=[],window.cmpDataLayer})().push(e)}function S(){return window.cmpDataLayer&&Array.isArray(window.cmpDataLayer)}y(document,"click",'[data-popin-toggle="collapse"]',(e=>{"A"===e.currentTarget.tagName&&e.preventDefault(),C(e.target)}));const O=window.setInterval((function(){a("call to sendSmartTagEvents");const e=w();if(a(`type of smartTag --\x3e ${typeof e}, is null ? --\x3e ${null===e}`),null===e)return I>4&&(a(`clearInterval ${O}`),clearInterval(O)),void(I+=1);if(S())for(;window.cmpDataLayer.length>0;){const e=window.cmpDataLayer.pop();"function"==typeof e&&e()}a(`clearInterval ${O}`),clearInterval(O)}
/*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   */),1e3);let I=0;var L=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},o=t||{},r=e.split(V),i=o.decode||M,s=0;s<r.length;s++){var a=r[s],c=a.indexOf("=");if(!(c<0)){var u=a.substr(0,c).trim(),l=a.substr(++c,a.length).trim();'"'==l[0]&&(l=l.slice(1,-1)),null==n[u]&&(n[u]=F(l,i))}}return n},P=function(e,t,n){var o=n||{},r=o.encode||T;if("function"!=typeof r)throw new TypeError("option encode is invalid");if(!k.test(e))throw new TypeError("argument name is invalid");var i=r(t);if(i&&!k.test(i))throw new TypeError("argument val is invalid");var s=e+"="+i;if(null!=o.maxAge){var a=o.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(a)}if(o.domain){if(!k.test(o.domain))throw new TypeError("option domain is invalid");s+="; Domain="+o.domain}if(o.path){if(!k.test(o.path))throw new TypeError("option path is invalid");s+="; Path="+o.path}if(o.expires){if("function"!=typeof o.expires.toUTCString)throw new TypeError("option expires is invalid");s+="; Expires="+o.expires.toUTCString()}o.httpOnly&&(s+="; HttpOnly");o.secure&&(s+="; Secure");if(o.sameSite){switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s},M=decodeURIComponent,T=encodeURIComponent,V=/; */,k=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function F(e,t){try{return t(e)}catch(t){return e}}function j(e,t){void 0===t&&(t={});var n=function(e){if(e&&"j"===e[0]&&":"===e[1])return e.substr(2);return e}(e);if(function(e,t){return void 0===t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(n,t.doNotParse))try{return JSON.parse(n)}catch(e){}return e}var R=window&&window.__assign||function(){return(R=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},D=function(){function e(e,t){var n=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return"string"==typeof e?L(e,t):"object"==typeof e&&null!==e?e:{}}(e,t),new Promise((function(){n.HAS_DOCUMENT_COOKIE="object"==typeof document&&"string"==typeof document.cookie})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=L(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,n){return void 0===t&&(t={}),this._updateBrowserValues(n),j(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var n={};for(var o in this.cookies)n[o]=j(this.cookies[o],e);return n},e.prototype.set=function(e,t,n){var o;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=R(R({},this.cookies),((o={})[e]=t,o)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=P(e,t,n)),this._emitChange({name:e,value:t,options:n})},e.prototype.remove=function(e,t){var n=t=R(R({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=R({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=P(e,"",n)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}();const N=()=>`${d.cookiePrefix}lmd_consent`,x=()=>`${d.cookiePrefix}lmd_gdpr_token`,B=()=>`${d.cookiePrefix}euconsent-v2`,G=new D,$=()=>G,U=$(),H=`${t(window.location.hostname)}`,Q=d.abtests.variants||[];let q=!1;const K=n("gdpr_forceToken");if(K){const e=new Date;U.set(x(),K,{path:"/",domain:H,expires:new Date(e.setFullYear(e.getFullYear()+1)),secure:!0,sameSite:"none"})}const z=()=>{let e=!1,t=U.get(x())||!1;var n,o;if(a(`abtest debug - current token -> ${t}`),(t<=0||t>100)&&(t=!1),!1===t&&(n=1,o=100,n=Math.ceil(n),o=Math.floor(o),e=Math.floor(Math.random()*(o-n+1))+n,t=e,a(`abtest debug - randon token given -> ${e}`)),!1!==e){const t=new Date;U.set(x(),e,{path:"/",domain:H,expires:new Date(t.setFullYear(t.getFullYear()+1)),secure:!0,sameSite:"none"})}return+t};var J="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function W(e){var t={exports:{}};return e(t,t.exports),t.exports}var Y,Z,X,ee,te,ne=W((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.TCFCommand||(t.TCFCommand={})).PING="ping",n.GET_TC_DATA="getTCData",n.GET_IN_APP_TC_DATA="getInAppTCData",n.GET_VENDOR_LIST="getVendorList",n.ADD_EVENT_LISTENER="addEventListener",n.REMOVE_EVENT_LISTENER="removeEventListener"})),oe=W((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(ne)})),re=W((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.CmpStatus||(t.CmpStatus={})).STUB="stub",n.LOADING="loading",n.LOADED="loaded",n.ERROR="error"})),ie=W((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.DisplayStatus||(t.DisplayStatus={})).VISIBLE="visible",n.HIDDEN="hidden",n.DISABLED="disabled"})),se=W((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.EventStatus||(t.EventStatus={})).TC_LOADED="tcloaded",n.CMP_UI_SHOWN="cmpuishown",n.USER_ACTION_COMPLETE="useractioncomplete"})),ae=W((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(re),n(ie),n(se)})),ce=function(){function e(e,t,n,o){this.success=!0,Object.assign(this,{callback:e,listenerId:n,param:t,next:o});try{this.respond()}catch(e){this.invokeCallback(null)}}return e.prototype.invokeCallback=function(e){null!==e?"function"==typeof this.next?this.callback(this.next,e,!0):this.callback(e,!0):this.callback(e,!1)},e}(),ue=Object.defineProperty({Command:ce},"__esModule",{value:!0}),le=J&&J.__extends||(Y=function(e,t){return(Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Y(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return le(t,e),t.prototype.respond=function(){this.throwIfParamInvalid(),this.invokeCallback(new je.TCData(this.param,this.listenerId))},t.prototype.throwIfParamInvalid=function(){if(!(void 0===this.param||Array.isArray(this.param)&&this.param.every(Number.isInteger)))throw new Error("Invalid Parameter")},t}(ue.Command),de=Object.defineProperty({GetTCDataCommand:pe},"__esModule",{value:!0}),fe=function(){function e(){this.eventQueue=new Map,this.queueNumber=0}return e.prototype.add=function(e){return this.eventQueue.set(this.queueNumber,e),this.queueNumber++},e.prototype.remove=function(e){return this.eventQueue.delete(e)},e.prototype.exec=function(){this.eventQueue.forEach((function(e,t){new de.GetTCDataCommand(e.callback,e.param,t,e.next)}))},e.prototype.clear=function(){this.queueNumber=0,this.eventQueue.clear()},Object.defineProperty(e.prototype,"size",{get:function(){return this.eventQueue.size},enumerable:!0,configurable:!0}),e}(),he=Object.defineProperty({EventListenerQueue:fe},"__esModule",{value:!0}),me=function(){function e(){}return e.reset=function(){delete this.cmpId,delete this.cmpVersion,delete this.eventStatus,delete this.gdprApplies,delete this.tcModel,delete this.tcString,delete this.tcfPolicyVersion,this.cmpStatus=ae.CmpStatus.LOADING,this.disabled=!1,this.displayStatus=ae.DisplayStatus.HIDDEN,this.eventQueue.clear()},e.apiVersion="2",e.eventQueue=new he.EventListenerQueue,e.cmpStatus=ae.CmpStatus.LOADING,e.disabled=!1,e.displayStatus=ae.DisplayStatus.HIDDEN,e}(),ge=Object.defineProperty({CmpApiModel:me},"__esModule",{value:!0}),ye=function(){this.cmpId=ge.CmpApiModel.cmpId,this.cmpVersion=ge.CmpApiModel.cmpVersion,this.gdprApplies=ge.CmpApiModel.gdprApplies,this.tcfPolicyVersion=ge.CmpApiModel.tcfPolicyVersion},ve=Object.defineProperty({Response:ye},"__esModule",{value:!0}),be=J&&J.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cmpStatus=ae.CmpStatus.ERROR,t}return be(t,e),t}(ve.Response),Ee=Object.defineProperty({Disabled:_e},"__esModule",{value:!0}),Ce=J&&J.__extends||(Z=function(e,t){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Z(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),we=J&&J.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},Ae=J&&J.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(we(arguments[t]));return e},Se=function(e){function t(t,n){var o=e.call(this)||this;if(o.eventStatus=ge.CmpApiModel.eventStatus,o.cmpStatus=ge.CmpApiModel.cmpStatus,o.listenerId=n,ge.CmpApiModel.gdprApplies){var r=ge.CmpApiModel.tcModel;o.tcString=ge.CmpApiModel.tcString,o.isServiceSpecific=r.isServiceSpecific,o.useNonStandardStacks=r.useNonStandardStacks,o.purposeOneTreatment=r.purposeOneTreatment,o.publisherCC=r.publisherCountryCode,o.outOfBand={allowedVendors:o.createVectorField(r.vendorsAllowed,t),disclosedVendors:o.createVectorField(r.vendorsDisclosed,t)},o.purpose={consents:o.createVectorField(r.purposeConsents),legitimateInterests:o.createVectorField(r.purposeLegitimateInterests)},o.vendor={consents:o.createVectorField(r.vendorConsents,t),legitimateInterests:o.createVectorField(r.vendorLegitimateInterests,t)},o.specialFeatureOptins=o.createVectorField(r.specialFeatureOptins),o.publisher={consents:o.createVectorField(r.publisherConsents),legitimateInterests:o.createVectorField(r.publisherLegitimateInterests),customPurpose:{consents:o.createVectorField(r.publisherCustomConsents),legitimateInterests:o.createVectorField(r.publisherCustomLegitimateInterests)},restrictions:o.createRestrictions(r.publisherRestrictions)}}return o}return Ce(t,e),t.prototype.createRestrictions=function(e){var t={};if(e.numRestrictions>0)for(var n=e.getMaxVendorId(),o=function(n){var o=n.toString();e.getRestrictions(n).forEach((function(e){var n=e.purposeId.toString();t[n]||(t[n]={}),t[n][o]=e.restrictionType}))},r=1;r<=n;r++)o(r);return t},t.prototype.createVectorField=function(e,t){return t?t.reduce((function(t,n){return t[n+""]=e.has(+n),t}),{}):Ae(e).reduce((function(e,t){return e[t[0].toString(10)]=t[1],e}),{})},t}(ve.Response),Oe=Object.defineProperty({TCData:Se},"__esModule",{value:!0}),Ie=J&&J.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Le=J&&J.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},Pe=J&&J.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Le(arguments[t]));return e},Me=function(e){function t(t){var n=e.call(this,t)||this;return delete n.outOfBand,n}return Ie(t,e),t.prototype.createVectorField=function(e){return Pe(e).reduce((function(e,t){return e+(t[1]?"1":"0")}),"")},t.prototype.createRestrictions=function(e){var t={};if(e.numRestrictions>0){var n=e.getMaxVendorId();e.getRestrictions().forEach((function(e){t[e.purposeId.toString()]="_".repeat(n)}));for(var o=function(n){var o=n+1;e.getRestrictions(o).forEach((function(e){var o=e.restrictionType.toString(),r=e.purposeId.toString(),i=t[r].substr(0,n),s=t[r].substr(n+1);t[r]=i+o+s}))},r=0;r<n;r++)o(r)}return t},t}(Oe.TCData),Te=Object.defineProperty({InAppTCData:Me},"__esModule",{value:!0}),Ve=J&&J.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ke=function(e){function t(){var t=e.call(this)||this;return t.cmpLoaded=!0,t.cmpStatus=ge.CmpApiModel.cmpStatus,t.displayStatus=ge.CmpApiModel.displayStatus,t.apiVersion=""+ge.CmpApiModel.apiVersion,ge.CmpApiModel.tcModel&&ge.CmpApiModel.tcModel.vendorListVersion&&(t.gvlVersion=+ge.CmpApiModel.tcModel.vendorListVersion),t}return Ve(t,e),t}(ve.Response),Fe=Object.defineProperty({Ping:ke},"__esModule",{value:!0}),je=W((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(Ee),n(Te),n(Fe),n(ve),n(Oe)})),Re=J&&J.__extends||(X=function(e,t){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}X(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),De=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Re(t,e),t.prototype.respond=function(){this.invokeCallback(new je.Ping)},t}(ue.Command),Ne=Object.defineProperty({PingCommand:De},"__esModule",{value:!0}),xe=J&&J.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xe(t,e),t.prototype.respond=function(){this.throwIfParamInvalid(),this.invokeCallback(new je.InAppTCData(this.param))},t}(de.GetTCDataCommand),Ge=Object.defineProperty({GetInAppTCDataCommand:Be},"__esModule",{value:!0}),$e=J&&J.__extends||(ee=function(e,t){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ee(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ue=function(e){function t(t){var n=e.call(this,t)||this;return n.name="DecodingError",n}return $e(t,e),t}(Error),He=Object.defineProperty({DecodingError:Ue},"__esModule",{value:!0}),Qe=J&&J.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qe=function(e){function t(t){var n=e.call(this,t)||this;return n.name="EncodingError",n}return Qe(t,e),t}(Error),Ke=Object.defineProperty({EncodingError:qe},"__esModule",{value:!0}),ze=J&&J.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Je=function(e){function t(t){var n=e.call(this,t)||this;return n.name="GVLError",n}return ze(t,e),t}(Error),We=Object.defineProperty({GVLError:Je},"__esModule",{value:!0}),Ye=J&&J.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ze=function(e){function t(t,n,o){void 0===o&&(o="");var r=e.call(this,"invalid value "+n+" passed for "+t+" "+o)||this;return r.name="TCModelError",r}return Ye(t,e),t}(Error),Xe=Object.defineProperty({TCModelError:Ze},"__esModule",{value:!0}),et=W((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(He),n(Ke),n(We),n(Xe)})),tt=function(){function e(){}return e.encode=function(e){if(!/^[0-1]+$/.test(e))throw new et.EncodingError("Invalid bitField");var t=e.length%this.LCM;e+=t?"0".repeat(this.LCM-t):"";for(var n="",o=0;o<e.length;o+=this.BASIS)n+=this.DICT[parseInt(e.substr(o,this.BASIS),2)];return n},e.decode=function(e){if(!/^[A-Za-z0-9\-_]+$/.test(e))throw new et.DecodingError("Invalidly encoded Base64URL string");for(var t="",n=0;n<e.length;n++){var o=this.REVERSE_DICT.get(e[n]).toString(2);t+="0".repeat(this.BASIS-o.length)+o}return t},e.DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",e.REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]),e.BASIS=6,e.LCM=24,e}(),nt=Object.defineProperty({Base64Url:tt},"__esModule",{value:!0}),ot=J&&J.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rt=function(){function e(){}return e.prototype.clone=function(){var e=this,t=new this.constructor;return Object.keys(this).forEach((function(n){var o=e.deepClone(e[n]);void 0!==o&&(t[n]=o)})),t},e.prototype.deepClone=function(e){var t,n,o=typeof e;if("number"===o||"string"===o||"boolean"===o)return e;if(null!==e&&"object"===o){if("function"==typeof e.clone)return e.clone();if(e instanceof Date)return new Date(e.getTime());if(void 0!==e[Symbol.iterator]){var r=[];try{for(var i=ot(e),s=i.next();!s.done;s=i.next()){var a=s.value;r.push(this.deepClone(a))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return e instanceof Array?r:new e.constructor(r)}var c={};for(var u in e)e.hasOwnProperty(u)&&(c[u]=this.deepClone(e[u]));return c}},e}(),it=Object.defineProperty({Cloneable:rt},"__esModule",{value:!0}),st=J&&J.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),at=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.root=null,t}return st(t,e),t.prototype.isEmpty=function(){return!this.root},t.prototype.add=function(e){var t,n={value:e,left:null,right:null};if(this.isEmpty())this.root=n;else for(t=this.root;;)if(e<t.value){if(null===t.left){t.left=n;break}t=t.left}else{if(!(e>t.value))break;if(null===t.right){t.right=n;break}t=t.right}},t.prototype.get=function(){for(var e=[],t=this.root;t;)if(t.left){for(var n=t.left;n.right&&n.right!=t;)n=n.right;n.right==t?(n.right=null,e.push(t.value),t=t.right):(n.right=t,t=t.left)}else e.push(t.value),t=t.right;return e},t.prototype.contains=function(e){for(var t=!1,n=this.root;n;){if(n.value===e){t=!0;break}e>n.value?n=n.right:e<n.value&&(n=n.left)}return t},t.prototype.min=function(e){var t;for(void 0===e&&(e=this.root);e;)e.left?e=e.left:(t=e.value,e=null);return t},t.prototype.max=function(e){var t;for(void 0===e&&(e=this.root);e;)e.right?e=e.right:(t=e.value,e=null);return t},t.prototype.remove=function(e,t){void 0===t&&(t=this.root);for(var n=null,o="left";t;)if(e<t.value)n=t,t=t.left,o="left";else if(e>t.value)n=t,t=t.right,o="right";else{if(t.left||t.right)if(t.left)if(t.right){var r=this.min(t.right);this.remove(r,t.right),t.value=r}else n?n[o]=t.left:this.root=t.left;else n?n[o]=t.right:this.root=t.right;else n?n[o]=null:this.root=null;t=null}},t}(it.Cloneable),ct=Object.defineProperty({BinarySearchTree:at},"__esModule",{value:!0}),ut=function(){function e(){}return e.prototype.has=function(t){return e.langSet.has(t)},e.prototype.forEach=function(t){e.langSet.forEach(t)},Object.defineProperty(e.prototype,"size",{get:function(){return e.langSet.size},enumerable:!0,configurable:!0}),e.langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]),e}(),lt=Object.defineProperty({ConsentLanguages:ut},"__esModule",{value:!0}),pt=function(){function e(){}return e.cmpId="cmpId",e.cmpVersion="cmpVersion",e.consentLanguage="consentLanguage",e.consentScreen="consentScreen",e.created="created",e.supportOOB="supportOOB",e.isServiceSpecific="isServiceSpecific",e.lastUpdated="lastUpdated",e.numCustomPurposes="numCustomPurposes",e.policyVersion="policyVersion",e.publisherCountryCode="publisherCountryCode",e.publisherCustomConsents="publisherCustomConsents",e.publisherCustomLegitimateInterests="publisherCustomLegitimateInterests",e.publisherLegitimateInterests="publisherLegitimateInterests",e.publisherConsents="publisherConsents",e.publisherRestrictions="publisherRestrictions",e.purposeConsents="purposeConsents",e.purposeLegitimateInterests="purposeLegitimateInterests",e.purposeOneTreatment="purposeOneTreatment",e.specialFeatureOptins="specialFeatureOptins",e.useNonStandardStacks="useNonStandardStacks",e.vendorConsents="vendorConsents",e.vendorLegitimateInterests="vendorLegitimateInterests",e.vendorListVersion="vendorListVersion",e.vendorsAllowed="vendorsAllowed",e.vendorsDisclosed="vendorsDisclosed",e.version="version",e}(),dt=Object.defineProperty({Fields:pt},"__esModule",{value:!0}),ft=W((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NOT_ALLOWED=0]="NOT_ALLOWED",e[e.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",e[e.REQUIRE_LI=2]="REQUIRE_LI"}(t.RestrictionType||(t.RestrictionType={}))})),ht=J&&J.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mt=function(e){function t(t,n){var o=e.call(this)||this;return void 0!==t&&(o.purposeId=t),void 0!==n&&(o.restrictionType=n),o}return ht(t,e),t.unHash=function(e){var n=e.split(this.hashSeparator),o=new t;if(2!==n.length)throw new et.TCModelError("hash",e);return o.purposeId=parseInt(n[0],10),o.restrictionType=parseInt(n[1],10),o},Object.defineProperty(t.prototype,"hash",{get:function(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return""+this.purposeId+t.hashSeparator+this.restrictionType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"purposeId",{get:function(){return this.purposeId_},set:function(e){this.purposeId_=e},enumerable:!0,configurable:!0}),t.prototype.isValid=function(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===ft.RestrictionType.NOT_ALLOWED||this.restrictionType===ft.RestrictionType.REQUIRE_CONSENT||this.restrictionType===ft.RestrictionType.REQUIRE_LI)},t.prototype.isSameAs=function(e){return this.purposeId===e.purposeId&&this.restrictionType===e.restrictionType},t.hashSeparator="-",t}(it.Cloneable),gt=Object.defineProperty({PurposeRestriction:mt},"__esModule",{value:!0}),yt=J&&J.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bitLength=0,t.map=new Map,t}return yt(t,e),t.prototype.has=function(e){return this.map.has(e)},t.prototype.isOkToHave=function(e,t,n){var o,r=!0;if(null===(o=this.gvl)||void 0===o?void 0:o.vendors){var i=this.gvl.vendors[n];if(i)if(e===ft.RestrictionType.NOT_ALLOWED)r=i.legIntPurposes.includes(t)||i.purposes.includes(t);else if(i.flexiblePurposes.length)switch(e){case ft.RestrictionType.REQUIRE_CONSENT:r=i.flexiblePurposes.includes(t)&&i.legIntPurposes.includes(t);break;case ft.RestrictionType.REQUIRE_LI:r=i.flexiblePurposes.includes(t)&&i.purposes.includes(t)}else r=!1;else r=!1}return r},t.prototype.add=function(e,t){if(this.isOkToHave(t.restrictionType,t.purposeId,e)){var n=t.hash;this.has(n)||(this.map.set(n,new ct.BinarySearchTree),this.bitLength=0),this.map.get(n).add(e)}},t.prototype.getVendors=function(e){var t=[];if(e){var n=e.hash;this.has(n)&&(t=this.map.get(n).get())}else{var o=new Set;this.map.forEach((function(e){e.get().forEach((function(e){o.add(e)}))})),t=Array.from(o)}return t},t.prototype.getRestrictionType=function(e,t){var n;return this.getRestrictions(e).forEach((function(e){e.purposeId===t&&(void 0===n||n>e.restrictionType)&&(n=e.restrictionType)})),n},t.prototype.vendorHasRestriction=function(e,t){for(var n=!1,o=this.getRestrictions(e),r=0;r<o.length&&!n;r++)n=t.isSameAs(o[r]);return n},t.prototype.getMaxVendorId=function(){var e=0;return this.map.forEach((function(t){e=Math.max(t.max(),e)})),e},t.prototype.getRestrictions=function(e){var t=[];return this.map.forEach((function(n,o){e?n.contains(e)&&t.push(gt.PurposeRestriction.unHash(o)):t.push(gt.PurposeRestriction.unHash(o))})),t},t.prototype.getPurposes=function(){var e=new Set;return this.map.forEach((function(t,n){e.add(gt.PurposeRestriction.unHash(n).purposeId)})),Array.from(e)},t.prototype.remove=function(e,t){var n=t.hash,o=this.map.get(n);o&&(o.remove(e),o.isEmpty()&&(this.map.delete(n),this.bitLength=0))},Object.defineProperty(t.prototype,"gvl",{get:function(){return this.gvl_},set:function(e){var t=this;this.gvl_||(this.gvl_=e,this.map.forEach((function(e,n){var o=gt.PurposeRestriction.unHash(n);e.get().forEach((function(n){t.isOkToHave(o.restrictionType,o.purposeId,n)||e.remove(n)}))})))},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.map.size},Object.defineProperty(t.prototype,"numRestrictions",{get:function(){return this.map.size},enumerable:!0,configurable:!0}),t}(it.Cloneable),bt=Object.defineProperty({PurposeRestrictionVector:vt},"__esModule",{value:!0}),_t=W((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CORE="core",e.VENDORS_DISCLOSED="vendorsDisclosed",e.VENDORS_ALLOWED="vendorsAllowed",e.PUBLISHER_TC="publisherTC"}(t.Segment||(t.Segment={}))})),Et=function(){function e(){}return e.ID_TO_KEY=[_t.Segment.CORE,_t.Segment.VENDORS_DISCLOSED,_t.Segment.VENDORS_ALLOWED,_t.Segment.PUBLISHER_TC],e.KEY_TO_ID=((te={})[_t.Segment.CORE]=0,te[_t.Segment.VENDORS_DISCLOSED]=1,te[_t.Segment.VENDORS_ALLOWED]=2,te[_t.Segment.PUBLISHER_TC]=3,te),e}(),Ct=Object.defineProperty({SegmentIDs:Et},"__esModule",{value:!0}),wt=J&&J.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),At=J&&J.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},St=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bitLength=0,t.maxId_=0,t.set_=new Set,t}return wt(t,e),t.prototype[Symbol.iterator]=function(){var e;return At(this,(function(t){switch(t.label){case 0:e=1,t.label=1;case 1:return e<=this.maxId?[4,[e,this.has(e)]]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}}))},t.prototype.values=function(){return this.set_.values()},Object.defineProperty(t.prototype,"maxId",{get:function(){return this.maxId_},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this.set_.has(e)},t.prototype.unset=function(e){var t=this;Array.isArray(e)?e.forEach((function(e){return t.unset(e)})):"object"==typeof e?this.unset(Object.keys(e).map((function(e){return+e}))):(this.set_.delete(e),this.bitLength=0,e===this.maxId&&(this.maxId_=0,this.set_.forEach((function(e){t.maxId_=Math.max(t.maxId,e)}))))},t.prototype.isIntMap=function(e){var t=this,n="object"==typeof e;return n&&Object.keys(e).every((function(n){var o=Number.isInteger(parseInt(n,10));return(o=o&&t.isValidNumber(e[n].id))&&void 0!==e[n].name}))},t.prototype.isValidNumber=function(e){return parseInt(e,10)>0},t.prototype.isSet=function(e){var t=!1;return e instanceof Set&&(t=Array.from(e).every(this.isValidNumber)),t},t.prototype.set=function(e){var t=this;if(Array.isArray(e))e.forEach((function(e){return t.set(e)}));else if(this.isSet(e))this.set(Array.from(e));else if(this.isIntMap(e))this.set(Object.keys(e).map((function(e){return+e})));else{if(!this.isValidNumber(e))throw new et.TCModelError("set()",e,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(e),this.maxId_=Math.max(this.maxId,e),this.bitLength=0}},t.prototype.empty=function(){this.set_=new Set},t.prototype.forEach=function(e){for(var t=1;t<=this.maxId;t++)e(this.has(t),t)},Object.defineProperty(t.prototype,"size",{get:function(){return this.set_.size},enumerable:!0,configurable:!0}),t.prototype.setAll=function(e){this.set(e)},t}(it.Cloneable),Ot=Object.defineProperty({Vector:St},"__esModule",{value:!0}),It=W((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(ct),n(lt),n(dt),n(gt),n(bt),n(ft),n(_t),n(Ct),n(Ot)})),Lt=function(){function e(){}var t,n,o,r,i,s,a,c,u,l,p,d,f,h,m,g,y,v;return t=It.Fields.cmpId,n=It.Fields.cmpVersion,o=It.Fields.consentLanguage,r=It.Fields.consentScreen,i=It.Fields.created,s=It.Fields.isServiceSpecific,a=It.Fields.lastUpdated,c=It.Fields.policyVersion,u=It.Fields.publisherCountryCode,l=It.Fields.publisherLegitimateInterests,p=It.Fields.publisherConsents,d=It.Fields.purposeConsents,f=It.Fields.purposeLegitimateInterests,h=It.Fields.purposeOneTreatment,m=It.Fields.specialFeatureOptins,g=It.Fields.useNonStandardStacks,y=It.Fields.vendorListVersion,v=It.Fields.version,e[t]=12,e[n]=12,e[o]=12,e[r]=6,e[i]=36,e[s]=1,e[a]=36,e[c]=6,e[u]=12,e[l]=24,e[p]=24,e[d]=24,e[f]=24,e[h]=1,e[m]=12,e[g]=1,e[y]=12,e[v]=6,e.anyBoolean=1,e.encodingType=1,e.maxId=16,e.numCustomPurposes=6,e.numEntries=12,e.numRestrictions=12,e.purposeId=6,e.restrictionType=2,e.segmentType=3,e.singleOrRange=1,e.vendorId=16,e}(),Pt=Object.defineProperty({BitLength:Lt},"__esModule",{value:!0}),Mt=function(){function e(){}return e.encode=function(e){return+e+""},e.decode=function(e){return"1"===e},e}(),Tt=Object.defineProperty({BooleanEncoder:Mt},"__esModule",{value:!0}),Vt=function(){function e(){}return e.encode=function(e,t){var n;if("string"==typeof e&&(e=parseInt(e,10)),(n=e.toString(2)).length>t||e<0)throw new et.EncodingError(e+" too large to encode into "+t);return n.length<t&&(n="0".repeat(t-n.length)+n),n},e.decode=function(e,t){if(t!==e.length)throw new et.DecodingError("invalid bit length");return parseInt(e,2)},e}(),kt=Object.defineProperty({IntEncoder:Vt},"__esModule",{value:!0}),Ft=function(){function e(){}return e.encode=function(e,t){return kt.IntEncoder.encode(Math.round(e.getTime()/100),t)},e.decode=function(e,t){if(t!==e.length)throw new et.DecodingError("invalid bit length");var n=new Date;return n.setTime(100*kt.IntEncoder.decode(e,t)),n},e}(),jt=Object.defineProperty({DateEncoder:Ft},"__esModule",{value:!0}),Rt=function(){function e(){}return e.encode=function(e,t){for(var n="",o=1;o<=t;o++)n+=Tt.BooleanEncoder.encode(e.has(o));return n},e.decode=function(e,t){if(e.length!==t)throw new et.DecodingError("bitfield encoding length mismatch");for(var n=new It.Vector,o=1;o<=t;o++)Tt.BooleanEncoder.decode(e[o-1])&&n.set(o);return n.bitLength=e.length,n},e}(),Dt=Object.defineProperty({FixedVectorEncoder:Rt},"__esModule",{value:!0}),Nt=function(){function e(){}return e.encode=function(e,t){var n=(e=e.toUpperCase()).charCodeAt(0)-65,o=e.charCodeAt(1)-65;if(n<0||n>25||o<0||o>25)throw new et.EncodingError("invalid language code: "+e);if(t%2==1)throw new et.EncodingError("numBits must be even, "+t+" is not valid");return t/=2,kt.IntEncoder.encode(n,t)+kt.IntEncoder.encode(o,t)},e.decode=function(e,t){if(t!==e.length||e.length%2)throw new et.DecodingError("invalid bit length for language");var n=e.length/2,o=kt.IntEncoder.decode(e.slice(0,n),n)+65,r=kt.IntEncoder.decode(e.slice(n),n)+65;return String.fromCharCode(o)+String.fromCharCode(r)},e}(),xt=Object.defineProperty({LangEncoder:Nt},"__esModule",{value:!0}),Bt=function(){function e(){}return e.encode=function(e){var t=kt.IntEncoder.encode(e.numRestrictions,Pt.BitLength.numRestrictions);return e.isEmpty()||e.getRestrictions().forEach((function(n){t+=kt.IntEncoder.encode(n.purposeId,Pt.BitLength.purposeId),t+=kt.IntEncoder.encode(n.restrictionType,Pt.BitLength.restrictionType);for(var o=e.getVendors(n),r=o.length,i=0,s=0,a="",c=0;c<r;c++){var u=o[c];if(0===s&&(i++,s=u),c===r-1||o[c+1]>u+1){var l=!(u===s);a+=Tt.BooleanEncoder.encode(l),a+=kt.IntEncoder.encode(s,Pt.BitLength.vendorId),l&&(a+=kt.IntEncoder.encode(u,Pt.BitLength.vendorId)),s=0}}t+=kt.IntEncoder.encode(i,Pt.BitLength.numEntries),t+=a})),t},e.decode=function(e){var t=0,n=new It.PurposeRestrictionVector,o=kt.IntEncoder.decode(e.substr(t,Pt.BitLength.numRestrictions),Pt.BitLength.numRestrictions);t+=Pt.BitLength.numRestrictions;for(var r=0;r<o;r++){var i=kt.IntEncoder.decode(e.substr(t,Pt.BitLength.purposeId),Pt.BitLength.purposeId);t+=Pt.BitLength.purposeId;var s=kt.IntEncoder.decode(e.substr(t,Pt.BitLength.restrictionType),Pt.BitLength.restrictionType);t+=Pt.BitLength.restrictionType;var a=new It.PurposeRestriction(i,s),c=kt.IntEncoder.decode(e.substr(t,Pt.BitLength.numEntries),Pt.BitLength.numEntries);t+=Pt.BitLength.numEntries;for(var u=0;u<c;u++){var l=Tt.BooleanEncoder.decode(e.substr(t,Pt.BitLength.anyBoolean));t+=Pt.BitLength.anyBoolean;var p=kt.IntEncoder.decode(e.substr(t,Pt.BitLength.vendorId),Pt.BitLength.vendorId);if(t+=Pt.BitLength.vendorId,l){var d=kt.IntEncoder.decode(e.substr(t,Pt.BitLength.vendorId),Pt.BitLength.vendorId);if(t+=Pt.BitLength.vendorId,d<p)throw new et.DecodingError("Invalid RangeEntry: endVendorId "+d+" is less than "+p);for(var f=p;f<=d;f++)n.add(f,a)}else n.add(p,a)}}return n.bitLength=t,n},e}(),Gt=Object.defineProperty({PurposeRestrictionVectorEncoder:Bt},"__esModule",{value:!0}),$t=W((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.FIELD=0]="FIELD",e[e.RANGE=1]="RANGE"}(t.VectorEncodingType||(t.VectorEncodingType={}))})),Ut=function(){function e(){}return e.encode=function(e){var t,n=[],o=[],r=kt.IntEncoder.encode(e.maxId,on.BitLength.maxId),i="",s=on.BitLength.maxId+on.BitLength.encodingType,a=s+e.maxId,c=2*on.BitLength.vendorId+on.BitLength.singleOrRange+on.BitLength.numEntries,u=s+on.BitLength.numEntries;return e.forEach((function(r,s){i+=Tt.BooleanEncoder.encode(r),(t=e.maxId>c&&u<a)&&r&&(e.has(s+1)?0===o.length&&(o.push(s),u+=on.BitLength.singleOrRange,u+=on.BitLength.vendorId):(o.push(s),u+=on.BitLength.vendorId,n.push(o),o=[]))})),t?(r+=$t.VectorEncodingType.RANGE+"",r+=this.buildRangeEncoding(n)):(r+=$t.VectorEncodingType.FIELD+"",r+=i),r},e.decode=function(e,t){var n,o=0,r=kt.IntEncoder.decode(e.substr(o,on.BitLength.maxId),on.BitLength.maxId);o+=on.BitLength.maxId;var i=kt.IntEncoder.decode(e.charAt(o),on.BitLength.encodingType);if(o+=on.BitLength.encodingType,i===$t.VectorEncodingType.RANGE){if(n=new It.Vector,1===t){if("1"===e.substr(o,1))throw new et.DecodingError("Unable to decode default consent=1");o++}var s=kt.IntEncoder.decode(e.substr(o,on.BitLength.numEntries),on.BitLength.numEntries);o+=on.BitLength.numEntries;for(var a=0;a<s;a++){var c=Tt.BooleanEncoder.decode(e.charAt(o));o+=on.BitLength.singleOrRange;var u=kt.IntEncoder.decode(e.substr(o,on.BitLength.vendorId),on.BitLength.vendorId);if(o+=on.BitLength.vendorId,c){var l=kt.IntEncoder.decode(e.substr(o,on.BitLength.vendorId),on.BitLength.vendorId);o+=on.BitLength.vendorId;for(var p=u;p<=l;p++)n.set(p)}else n.set(u)}}else{var d=e.substr(o,r);o+=r,n=Dt.FixedVectorEncoder.decode(d,r)}return n.bitLength=o,n},e.buildRangeEncoding=function(e){var t=e.length,n=kt.IntEncoder.encode(t,on.BitLength.numEntries);return e.forEach((function(e){var t=1===e.length;n+=Tt.BooleanEncoder.encode(!t),n+=kt.IntEncoder.encode(e[0],on.BitLength.vendorId),t||(n+=kt.IntEncoder.encode(e[1],on.BitLength.vendorId))})),n},e}(),Ht=Object.defineProperty({VendorVectorEncoder:Ut},"__esModule",{value:!0}),Qt=function(){function e(){}var t,n,o,r,i,s,a,c,u,l,p,d,f,h,m,g,y,v,b,_,E,C,w,A,S,O;return t=It.Fields.version,n=It.Fields.created,o=It.Fields.lastUpdated,r=It.Fields.cmpId,i=It.Fields.cmpVersion,s=It.Fields.consentScreen,a=It.Fields.consentLanguage,c=It.Fields.vendorListVersion,u=It.Fields.policyVersion,l=It.Fields.isServiceSpecific,p=It.Fields.useNonStandardStacks,d=It.Fields.specialFeatureOptins,f=It.Fields.purposeConsents,h=It.Fields.purposeLegitimateInterests,m=It.Fields.purposeOneTreatment,g=It.Fields.publisherCountryCode,y=It.Fields.vendorConsents,v=It.Fields.vendorLegitimateInterests,b=It.Fields.publisherRestrictions,_=It.Fields.vendorsDisclosed,E=It.Fields.vendorsAllowed,C=It.Fields.publisherConsents,w=It.Fields.publisherLegitimateInterests,A=It.Fields.numCustomPurposes,S=It.Fields.publisherCustomConsents,O=It.Fields.publisherCustomLegitimateInterests,e[t]=kt.IntEncoder,e[n]=jt.DateEncoder,e[o]=jt.DateEncoder,e[r]=kt.IntEncoder,e[i]=kt.IntEncoder,e[s]=kt.IntEncoder,e[a]=xt.LangEncoder,e[c]=kt.IntEncoder,e[u]=kt.IntEncoder,e[l]=Tt.BooleanEncoder,e[p]=Tt.BooleanEncoder,e[d]=Dt.FixedVectorEncoder,e[f]=Dt.FixedVectorEncoder,e[h]=Dt.FixedVectorEncoder,e[m]=Tt.BooleanEncoder,e[g]=xt.LangEncoder,e[y]=Ht.VendorVectorEncoder,e[v]=Ht.VendorVectorEncoder,e[b]=Gt.PurposeRestrictionVectorEncoder,e.segmentType=kt.IntEncoder,e[_]=Ht.VendorVectorEncoder,e[E]=Ht.VendorVectorEncoder,e[C]=Dt.FixedVectorEncoder,e[w]=Dt.FixedVectorEncoder,e[A]=kt.IntEncoder,e[S]=Dt.FixedVectorEncoder,e[O]=Dt.FixedVectorEncoder,e}(),qt=Object.defineProperty({FieldEncoderMap:Qt},"__esModule",{value:!0}),Kt=W((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(Tt),n(jt),n(qt),n(Dt),n(kt),n(xt),n(Gt),n($t),n(Ht)})),zt=function(){var e,t;this[1]=((e={})[It.Segment.CORE]=[It.Fields.version,It.Fields.created,It.Fields.lastUpdated,It.Fields.cmpId,It.Fields.cmpVersion,It.Fields.consentScreen,It.Fields.consentLanguage,It.Fields.vendorListVersion,It.Fields.purposeConsents,It.Fields.vendorConsents],e),this[2]=((t={})[It.Segment.CORE]=[It.Fields.version,It.Fields.created,It.Fields.lastUpdated,It.Fields.cmpId,It.Fields.cmpVersion,It.Fields.consentScreen,It.Fields.consentLanguage,It.Fields.vendorListVersion,It.Fields.policyVersion,It.Fields.isServiceSpecific,It.Fields.useNonStandardStacks,It.Fields.specialFeatureOptins,It.Fields.purposeConsents,It.Fields.purposeLegitimateInterests,It.Fields.purposeOneTreatment,It.Fields.publisherCountryCode,It.Fields.vendorConsents,It.Fields.vendorLegitimateInterests,It.Fields.publisherRestrictions],t[It.Segment.PUBLISHER_TC]=[It.Fields.publisherConsents,It.Fields.publisherLegitimateInterests,It.Fields.numCustomPurposes,It.Fields.publisherCustomConsents,It.Fields.publisherCustomLegitimateInterests],t[It.Segment.VENDORS_ALLOWED]=[It.Fields.vendorsAllowed],t[It.Segment.VENDORS_DISCLOSED]=[It.Fields.vendorsDisclosed],t)},Jt=Object.defineProperty({FieldSequence:zt},"__esModule",{value:!0}),Wt=function(e,t){if(this[1]=[It.Segment.CORE],this[2]=[It.Segment.CORE],2===e.version)if(e.isServiceSpecific)this[2].push(It.Segment.PUBLISHER_TC);else{var n=!(!t||!t.isForVendors);n&&!0!==e[It.Fields.supportOOB]||this[2].push(It.Segment.VENDORS_DISCLOSED),n&&(e[It.Fields.supportOOB]&&e[It.Fields.vendorsAllowed].size>0&&this[2].push(It.Segment.VENDORS_ALLOWED),this[2].push(It.Segment.PUBLISHER_TC))}},Yt=Object.defineProperty({SegmentSequence:Wt},"__esModule",{value:!0}),Zt=W((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(Jt),n(Yt)})),Xt=function(){function e(){}return e.encode=function(e,t){var n,o=this;try{n=this.fieldSequence[""+e.version][t]}catch(n){throw new et.EncodingError("Unable to encode version: "+e.version+", segment: "+t)}var r="";return t!==It.Segment.CORE&&(r=Kt.IntEncoder.encode(It.SegmentIDs.KEY_TO_ID[t],Pt.BitLength.segmentType)),n.forEach((function(n){var i=e[n],s=Kt.FieldEncoderMap[n],a=Pt.BitLength[n];void 0===a&&o.isPublisherCustom(n)&&(a=+e[dt.Fields.numCustomPurposes]);try{r+=s.encode(i,a)}catch(e){throw new et.EncodingError("Error encoding "+t+"->"+n+": "+e.message)}})),nt.Base64Url.encode(r)},e.decode=function(e,t,n){var o=this,r=nt.Base64Url.decode(e),i=0;return n===It.Segment.CORE&&(t.version=Kt.IntEncoder.decode(r.substr(i,Pt.BitLength[dt.Fields.version]),Pt.BitLength[dt.Fields.version])),n!==It.Segment.CORE&&(i+=Pt.BitLength.segmentType),this.fieldSequence[""+t.version][n].forEach((function(e){var n=Kt.FieldEncoderMap[e],s=Pt.BitLength[e];if(void 0===s&&o.isPublisherCustom(e)&&(s=+t[dt.Fields.numCustomPurposes]),0!==s){var a=r.substr(i,s);if(n===Kt.VendorVectorEncoder?t[e]=n.decode(a,t.version):t[e]=n.decode(a,s),Number.isInteger(s))i+=s;else{if(!Number.isInteger(t[e].bitLength))throw new et.DecodingError(e);i+=t[e].bitLength}}})),t},e.isPublisherCustom=function(e){return 0===e.indexOf("publisherCustom")},e.fieldSequence=new Zt.FieldSequence,e}(),en=Object.defineProperty({SegmentEncoder:Xt},"__esModule",{value:!0}),tn=function(){function e(){}return e.process=function(e,t){var n,o,r=e.gvl;if(!r)throw new et.EncodingError("Unable to encode TCModel without a GVL");if(!r.isReady)throw new et.EncodingError("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(e=e.clone()).consentLanguage=r.language.toUpperCase(),(null===(n=t)||void 0===n?void 0:n.version)>0&&(null===(o=t)||void 0===o?void 0:o.version)<=this.processor.length?e.version=t.version:e.version=this.processor.length;var i=e.version-1;if(!this.processor[i])throw new et.EncodingError("Invalid version: "+e.version);return this.processor[i](e,r)},e.processor=[function(e){return e},function(e,t){e.publisherRestrictions.gvl=t,e.purposeLegitimateInterests.unset(1);var n=new Map;return n.set("legIntPurposes",e.vendorLegitimateInterests),n.set("purposes",e.vendorConsents),n.forEach((function(n,o){n.forEach((function(r,i){if(r){var s=t.vendors[i];if(!s||s.deletedDate)n.unset(i);else if(0===s[o].length)if(e.isServiceSpecific)if(0===s.flexiblePurposes.length)n.unset(i);else{for(var a=e.publisherRestrictions.getRestrictions(i),c=!1,u=0,l=a.length;u<l&&!c;u++)c=a[u].restrictionType===It.RestrictionType.REQUIRE_CONSENT&&"purposes"===o||a[u].restrictionType===It.RestrictionType.REQUIRE_LI&&"legIntPurposes"===o;c||n.unset(i)}else n.unset(i)}}))})),e.vendorsDisclosed.set(t.vendors),e}],e}(),nn=Object.defineProperty({SemanticPreEncoder:tn},"__esModule",{value:!0}),on=W((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(nt),n(Pt),n(en),n(nn),n(Kt),n(Zt)})),rn=function(){function e(){}return e.absCall=function(e,t,n,o){return new Promise((function(r,i){var s=new XMLHttpRequest;s.withCredentials=n,s.addEventListener("load",(function(){if(s.readyState==XMLHttpRequest.DONE)if(s.status>=200&&s.status<300){var e=s.response;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}r(e)}else i(new Error("HTTP Status: "+s.status+" response type: "+s.responseType))})),s.addEventListener("error",(function(){i(new Error("error"))})),s.addEventListener("abort",(function(){i(new Error("aborted"))})),null===t?s.open("GET",e,!0):s.open("POST",e,!0),s.responseType="json",s.timeout=o,s.ontimeout=function(){i(new Error("Timeout "+o+"ms "+e))},s.send(t)}))},e.post=function(e,t,n,o){return void 0===n&&(n=!1),void 0===o&&(o=0),this.absCall(e,JSON.stringify(t),n,o)},e.fetch=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=0),this.absCall(e,null,t,n)},e}(),sn=Object.defineProperty({Json:rn},"__esModule",{value:!0}),an=J&&J.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),cn=J&&J.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},un=J&&J.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},ln=function(e){function t(n){var o=e.call(this)||this;o.isReady_=!1,o.isLatest=!1;var r=t.baseUrl;if(o.lang_=t.DEFAULT_LANGUAGE,o.isVendorList(n))o.populate(n),o.readyPromise=Promise.resolve();else{if(!r)throw new et.GVLError("must specify GVL.baseUrl before loading GVL json");if(n>0){var i=n;t.CACHE.has(i)?(o.populate(t.CACHE.get(i)),o.readyPromise=Promise.resolve()):(r+=t.versionedFilename.replace("[VERSION]",i+""),o.readyPromise=o.fetchJson(r))}else t.CACHE.has(t.LATEST_CACHE_KEY)?(o.populate(t.CACHE.get(t.LATEST_CACHE_KEY)),o.readyPromise=Promise.resolve()):(o.isLatest=!0,o.readyPromise=o.fetchJson(r+t.latestFilename))}return o}return an(t,e),Object.defineProperty(t,"baseUrl",{get:function(){return this.baseUrl_},set:function(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new et.GVLError("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");e.length>0&&"/"!==e[e.length-1]&&(e+="/"),this.baseUrl_=e},enumerable:!0,configurable:!0}),t.emptyLanguageCache=function(e){var n=!1;return void 0===e&&t.LANGUAGE_CACHE.size>0?(t.LANGUAGE_CACHE=new Map,n=!0):"string"==typeof e&&this.consentLanguages.has(e.toUpperCase())&&(t.LANGUAGE_CACHE.delete(e.toUpperCase()),n=!0),n},t.emptyCache=function(e){var n=!1;return Number.isInteger(e)&&e>=0?(t.CACHE.delete(e),n=!0):void 0===e&&(t.CACHE=new Map,n=!0),n},t.prototype.cacheLanguage=function(){t.LANGUAGE_CACHE.has(this.lang_)||t.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})},t.prototype.fetchJson=function(e){return cn(this,void 0,void 0,(function(){var t,n;return un(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=this.populate,[4,sn.Json.fetch(e)];case 1:return t.apply(this,[o.sent()]),[3,3];case 2:throw n=o.sent(),new et.GVLError(n.message);case 3:return[2]}}))}))},t.prototype.getJson=function(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))},t.prototype.changeLanguage=function(e){return cn(this,void 0,void 0,(function(){var n,o,r,i,s;return un(this,(function(a){switch(a.label){case 0:if(n=e.toUpperCase(),!t.consentLanguages.has(n))return[3,6];if(n===this.lang_)return[3,5];if(this.lang_=n,!t.LANGUAGE_CACHE.has(n))return[3,1];for(r in o=t.LANGUAGE_CACHE.get(n))o.hasOwnProperty(r)&&(this[r]=o[r]);return[3,5];case 1:i=t.baseUrl+t.languageFilename.replace("[LANG]",e),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchJson(i)];case 3:return a.sent(),this.cacheLanguage(),[3,5];case 4:throw s=a.sent(),new et.GVLError("unable to load language: "+s.message);case 5:return[3,7];case 6:throw new et.GVLError("unsupported language "+e);case 7:return[2]}}))}))},Object.defineProperty(t.prototype,"language",{get:function(){return this.lang_},enumerable:!0,configurable:!0}),t.prototype.isVendorList=function(e){return void 0!==e&&void 0!==e.vendors},t.prototype.populate=function(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&t.CACHE.set(t.LATEST_CACHE_KEY,this.getJson()),t.CACHE.has(this.vendorListVersion)||t.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()},t.prototype.mapVendors=function(e){var t=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach((function(e){t.byPurposeVendorMap[e]={legInt:new Set,consent:new Set,flexible:new Set}})),Object.keys(this.specialPurposes).forEach((function(e){t.bySpecialPurposeVendorMap[e]=new Set})),Object.keys(this.features).forEach((function(e){t.byFeatureVendorMap[e]=new Set})),Object.keys(this.specialFeatures).forEach((function(e){t.bySpecialFeatureVendorMap[e]=new Set})),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map((function(e){return+e}))),this.vendorIds=new Set(e),this.vendors_=e.reduce((function(e,n){var o=t.vendors_[""+n];return o&&void 0===o.deletedDate&&(o.purposes.forEach((function(e){t.byPurposeVendorMap[e+""].consent.add(n)})),o.specialPurposes.forEach((function(e){t.bySpecialPurposeVendorMap[e+""].add(n)})),o.legIntPurposes.forEach((function(e){t.byPurposeVendorMap[e+""].legInt.add(n)})),o.flexiblePurposes&&o.flexiblePurposes.forEach((function(e){t.byPurposeVendorMap[e+""].flexible.add(n)})),o.features.forEach((function(e){t.byFeatureVendorMap[e+""].add(n)})),o.specialFeatures.forEach((function(e){t.bySpecialFeatureVendorMap[e+""].add(n)})),e[n]=o),e}),{})},t.prototype.getFilteredVendors=function(e,t,n,o){var r=this,i=e.charAt(0).toUpperCase()+e.slice(1),s={};return("purpose"===e&&n?this["by"+i+"VendorMap"][t+""][n]:this["by"+(o?"Special":"")+i+"VendorMap"][t+""]).forEach((function(e){s[e+""]=r.vendors[e+""]})),s},t.prototype.getVendorsWithConsentPurpose=function(e){return this.getFilteredVendors("purpose",e,"consent")},t.prototype.getVendorsWithLegIntPurpose=function(e){return this.getFilteredVendors("purpose",e,"legInt")},t.prototype.getVendorsWithFlexiblePurpose=function(e){return this.getFilteredVendors("purpose",e,"flexible")},t.prototype.getVendorsWithSpecialPurpose=function(e){return this.getFilteredVendors("purpose",e,void 0,!0)},t.prototype.getVendorsWithFeature=function(e){return this.getFilteredVendors("feature",e)},t.prototype.getVendorsWithSpecialFeature=function(e){return this.getFilteredVendors("feature",e,void 0,!0)},Object.defineProperty(t.prototype,"vendors",{get:function(){return this.vendors_},enumerable:!0,configurable:!0}),t.prototype.narrowVendorsTo=function(e){this.mapVendors(e)},Object.defineProperty(t.prototype,"isReady",{get:function(){return this.isReady_},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.getJson())},t.isInstanceOf=function(e){return"object"==typeof e&&"function"==typeof e.narrowVendorsTo},t.LANGUAGE_CACHE=new Map,t.CACHE=new Map,t.LATEST_CACHE_KEY=0,t.DEFAULT_LANGUAGE="EN",t.consentLanguages=new It.ConsentLanguages,t.latestFilename="vendor-list.json",t.versionedFilename="archives/vendor-list-v[VERSION].json",t.languageFilename="purposes-[LANG].json",t}(it.Cloneable),pn=Object.defineProperty({GVL:ln},"__esModule",{value:!0}),dn=J&&J.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fn=function(e){function t(t){var n=e.call(this)||this;return n.isServiceSpecific_=!1,n.supportOOB_=!0,n.useNonStandardStacks_=!1,n.purposeOneTreatment_=!1,n.publisherCountryCode_="AA",n.version_=2,n.consentScreen_=0,n.policyVersion_=2,n.consentLanguage_="EN",n.cmpId_=0,n.cmpVersion_=0,n.vendorListVersion_=0,n.numCustomPurposes_=0,n.specialFeatureOptins=new It.Vector,n.purposeConsents=new It.Vector,n.purposeLegitimateInterests=new It.Vector,n.publisherConsents=new It.Vector,n.publisherLegitimateInterests=new It.Vector,n.publisherCustomConsents=new It.Vector,n.publisherCustomLegitimateInterests=new It.Vector,n.vendorConsents=new It.Vector,n.vendorLegitimateInterests=new It.Vector,n.vendorsDisclosed=new It.Vector,n.vendorsAllowed=new It.Vector,n.publisherRestrictions=new It.PurposeRestrictionVector,t&&(n.gvl=t),n.created=new Date,n.updated(),n}return dn(t,e),Object.defineProperty(t.prototype,"gvl",{get:function(){return this.gvl_},set:function(e){pn.GVL.isInstanceOf(e)||(e=new pn.GVL(e)),this.gvl_=e,this.publisherRestrictions.gvl=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cmpId",{get:function(){return this.cmpId_},set:function(e){if(!(Number.isInteger(+e)&&e>1))throw new et.TCModelError("cmpId",e);this.cmpId_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cmpVersion",{get:function(){return this.cmpVersion_},set:function(e){if(!(Number.isInteger(+e)&&e>-1))throw new et.TCModelError("cmpVersion",e);this.cmpVersion_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"consentScreen",{get:function(){return this.consentScreen_},set:function(e){if(!(Number.isInteger(+e)&&e>-1))throw new et.TCModelError("consentScreen",e);this.consentScreen_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"consentLanguage",{get:function(){return this.consentLanguage_},set:function(e){this.consentLanguage_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"publisherCountryCode",{get:function(){return this.publisherCountryCode_},set:function(e){if(!/^([A-z]){2}$/.test(e))throw new et.TCModelError("publisherCountryCode",e);this.publisherCountryCode_=e.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vendorListVersion",{get:function(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_},set:function(e){if((e=+e>>0)<0)throw new et.TCModelError("vendorListVersion",e);this.vendorListVersion_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"policyVersion",{get:function(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_},set:function(e){if(this.policyVersion_=parseInt(e,10),this.policyVersion_<0)throw new et.TCModelError("policyVersion",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this.version_},set:function(e){this.version_=parseInt(e,10)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isServiceSpecific",{get:function(){return this.isServiceSpecific_},set:function(e){this.isServiceSpecific_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useNonStandardStacks",{get:function(){return this.useNonStandardStacks_},set:function(e){this.useNonStandardStacks_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supportOOB",{get:function(){return this.supportOOB_},set:function(e){this.supportOOB_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"purposeOneTreatment",{get:function(){return this.purposeOneTreatment_},set:function(e){this.purposeOneTreatment_=e},enumerable:!0,configurable:!0}),t.prototype.setAllVendorConsents=function(){this.vendorConsents.set(this.gvl.vendors)},t.prototype.unsetAllVendorConsents=function(){this.vendorConsents.empty()},t.prototype.setAllVendorsDisclosed=function(){this.vendorsDisclosed.set(this.gvl.vendors)},t.prototype.unsetAllVendorsDisclosed=function(){this.vendorsDisclosed.empty()},t.prototype.setAllVendorsAllowed=function(){this.vendorsAllowed.set(this.gvl.vendors)},t.prototype.unsetAllVendorsAllowed=function(){this.vendorsAllowed.empty()},t.prototype.setAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.set(this.gvl.vendors)},t.prototype.unsetAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.empty()},t.prototype.setAllPurposeConsents=function(){this.purposeConsents.set(this.gvl.purposes)},t.prototype.unsetAllPurposeConsents=function(){this.purposeConsents.empty()},t.prototype.setAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.set(this.gvl.purposes)},t.prototype.unsetAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.empty()},t.prototype.setAllSpecialFeatureOptins=function(){this.specialFeatureOptins.set(this.gvl.specialFeatures)},t.prototype.unsetAllSpecialFeatureOptins=function(){this.specialFeatureOptins.empty()},t.prototype.setAll=function(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()},t.prototype.unsetAll=function(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()},Object.defineProperty(t.prototype,"numCustomPurposes",{get:function(){var e=this.numCustomPurposes_;if("object"==typeof this.customPurposes){var t=Object.keys(this.customPurposes).sort((function(e,t){return+e-+t}));e=parseInt(t.pop(),10)}return e},set:function(e){if(this.numCustomPurposes_=parseInt(e,10),this.numCustomPurposes_<0)throw new et.TCModelError("numCustomPurposes",e)},enumerable:!0,configurable:!0}),t.prototype.updated=function(){this.lastUpdated=new Date},t.consentLanguages=pn.GVL.consentLanguages,t}(it.Cloneable),hn=Object.defineProperty({TCModel:fn},"__esModule",{value:!0}),mn=function(){function e(){}return e.encode=function(e,t){var n,o,r="";return e=on.SemanticPreEncoder.process(e,t),(o=Array.isArray(null===(n=t)||void 0===n?void 0:n.segments)?t.segments:new on.SegmentSequence(e,t)[""+e.version]).forEach((function(t,n){var i="";n<o.length-1&&(i="."),r+=on.SegmentEncoder.encode(e,t)+i})),r},e.decode=function(e,t){var n=e.split("."),o=n.length;t||(t=new hn.TCModel);for(var r=0;r<o;r++){var i=n[r],s=on.Base64Url.decode(i.charAt(0)).substr(0,on.BitLength.segmentType),a=It.SegmentIDs.ID_TO_KEY[kt.IntEncoder.decode(s,on.BitLength.segmentType).toString()];on.SegmentEncoder.decode(i,t,a)}return t},e}(),gn=Object.defineProperty({TCString:mn},"__esModule",{value:!0}),yn=W((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(on),n(et),n(It),n(it),n(pn),n(sn),n(hn),n(gn)})),vn=J&&J.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vn(t,e),t.prototype.respond=function(){var e,t=this,n=ge.CmpApiModel.tcModel,o=n.vendorListVersion;void 0===this.param&&(this.param=o),(e=this.param===o&&n.gvl?n.gvl:new yn.GVL(this.param)).readyPromise.then((function(){t.invokeCallback(e.getJson())}))},t}(ue.Command),_n=Object.defineProperty({GetVendorListCommand:bn},"__esModule",{value:!0}),En=J&&J.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return En(t,e),t.prototype.respond=function(){this.listenerId=ge.CmpApiModel.eventQueue.add({callback:this.callback,param:this.param,next:this.next}),e.prototype.respond.call(this)},t}(de.GetTCDataCommand),wn=Object.defineProperty({AddEventListenerCommand:Cn},"__esModule",{value:!0}),An=J&&J.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Sn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return An(t,e),t.prototype.respond=function(){this.invokeCallback(ge.CmpApiModel.eventQueue.remove(this.param))},t}(ue.Command),On=Object.defineProperty({RemoveEventListenerCommand:Sn},"__esModule",{value:!0}),In=function(){function e(){}var t,n,o,r,i,s;return t=ne.TCFCommand.PING,n=ne.TCFCommand.GET_TC_DATA,o=ne.TCFCommand.GET_IN_APP_TC_DATA,r=ne.TCFCommand.GET_VENDOR_LIST,i=ne.TCFCommand.ADD_EVENT_LISTENER,s=ne.TCFCommand.REMOVE_EVENT_LISTENER,e[t]=Ne.PingCommand,e[n]=de.GetTCDataCommand,e[o]=Ge.GetInAppTCDataCommand,e[r]=_n.GetVendorListCommand,e[i]=wn.AddEventListenerCommand,e[s]=On.RemoveEventListenerCommand,e}(),Ln=Object.defineProperty({CommandMap:In},"__esModule",{value:!0}),Pn=function(){function e(){}return e.has=function(e){return"string"==typeof e&&(e=+e),this.set_.has(e)},e.set_=new Set([0,2,void 0,null]),e}(),Mn=Object.defineProperty({SupportedVersions:Pn},"__esModule",{value:!0}),Tn=W((function(e,t){var n=J&&J.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},o=J&&J.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.API_KEY="__tcfapi";var r=function(){function e(e){var n,o;if(e){var r=oe.TCFCommand.ADD_EVENT_LISTENER;if(null===(n=e)||void 0===n?void 0:n[r])throw new Error("Built-In Custom Commmand for "+r+" not allowed: Use "+oe.TCFCommand.GET_TC_DATA+" instead");if(r=oe.TCFCommand.REMOVE_EVENT_LISTENER,null===(o=e)||void 0===o?void 0:o[r])throw new Error("Built-In Custom Commmand for "+r+" not allowed");this.customCommands=e}try{this.callQueue=window[t.API_KEY]()||[]}catch(e){this.callQueue=[]}finally{window[t.API_KEY]=this.apiCall.bind(this),this.purgeQueuedCalls()}}return e.prototype.apiCall=function(e,t,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];if("string"!=typeof e)n(null,!1);else if(Mn.SupportedVersions.has(t)){if("function"!=typeof n)throw new Error("invalid callback function");ge.CmpApiModel.disabled?n(new Ee.Disabled,!1):this.isCustomCommand(e)||this.isBuiltInCommand(e)?this.isCustomCommand(e)&&!this.isBuiltInCommand(e)?(r=this.customCommands)[e].apply(r,o([n],i)):e===oe.TCFCommand.PING?this.isCustomCommand(e)?new Ln.CommandMap[e](this.customCommands[e],i[0],null,n):new Ln.CommandMap[e](n,i[0]):void 0===ge.CmpApiModel.tcModel?this.callQueue.push(o([e,t,n],i)):this.isCustomCommand(e)&&this.isBuiltInCommand(e)?new Ln.CommandMap[e](this.customCommands[e],i[0],null,n):new Ln.CommandMap[e](n,i[0]):n(null,!1)}else n(null,!1)},e.prototype.purgeQueuedCalls=function(){var e=this.callQueue;this.callQueue=[],e.forEach((function(e){window[t.API_KEY].apply(window,o(e))}))},e.prototype.isCustomCommand=function(e){return this.customCommands&&"function"==typeof this.customCommands[e]},e.prototype.isBuiltInCommand=function(e){return void 0!==Ln.CommandMap[e]},e}();t.CallResponder=r})),Vn=function(){function e(e,t,n,o){void 0===n&&(n=!1),this.numUpdates=0,this.throwIfInvalidInt(e,"cmpId",2),this.throwIfInvalidInt(t,"cmpVersion",0),ge.CmpApiModel.cmpId=e,ge.CmpApiModel.cmpVersion=t,this.isServiceSpecific=!!n,this.callResponder=new Tn.CallResponder(o)}return e.prototype.throwIfInvalidInt=function(e,t,n){if(!("number"==typeof e&&Number.isInteger(e)&&e>=n))throw new Error("Invalid "+t+": "+e)},e.prototype.update=function(e,t){if(void 0===t&&(t=!1),ge.CmpApiModel.disabled)throw new Error("CmpApi Disabled");ge.CmpApiModel.cmpStatus=ae.CmpStatus.LOADED,t?(ge.CmpApiModel.displayStatus=ae.DisplayStatus.VISIBLE,ge.CmpApiModel.eventStatus=ae.EventStatus.CMP_UI_SHOWN):void 0===ge.CmpApiModel.tcModel?(ge.CmpApiModel.displayStatus=ae.DisplayStatus.DISABLED,ge.CmpApiModel.eventStatus=ae.EventStatus.TC_LOADED):(ge.CmpApiModel.displayStatus=ae.DisplayStatus.HIDDEN,ge.CmpApiModel.eventStatus=ae.EventStatus.USER_ACTION_COMPLETE),ge.CmpApiModel.gdprApplies=null!==e,ge.CmpApiModel.gdprApplies?(""===e?(ge.CmpApiModel.tcModel=new yn.TCModel,ge.CmpApiModel.tcModel.cmpId=ge.CmpApiModel.cmpId,ge.CmpApiModel.tcModel.cmpVersion=ge.CmpApiModel.cmpVersion):ge.CmpApiModel.tcModel=yn.TCString.decode(e),ge.CmpApiModel.tcModel.isServiceSpecific=this.isServiceSpecific,ge.CmpApiModel.tcfPolicyVersion=+ge.CmpApiModel.tcModel.policyVersion,ge.CmpApiModel.tcString=e):ge.CmpApiModel.tcModel=null,0===this.numUpdates?this.callResponder.purgeQueuedCalls():ge.CmpApiModel.eventQueue.exec(),this.numUpdates++},e.prototype.disable=function(){ge.CmpApiModel.disabled=!0,ge.CmpApiModel.cmpStatus=ae.CmpStatus.ERROR},e}(),kn=Object.defineProperty({CmpApi:Vn},"__esModule",{value:!0});const Fn=new(W((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(oe),n(je),n(ae),n(kn),t.API_KEY=Tn.API_KEY})).CmpApi)(371,1,!0),jn=new Event("gdprConsentGiven"),Rn=new Event("gdprConsentFirstGiven");var Dn=e=>{jn.purposes=e,document.dispatchEvent(jn)},Nn=e=>{Rn.purposes=e,document.dispatchEvent(Rn)};const xn=(e,t)=>{if(null===document.querySelector(`style[data-gdpr-key="${e}"]`)){const n=document.createElement("style");n.setAttribute("data-gdpr-key",e),n.innerHTML=t,document.head.appendChild(n)}};const Bn=e=>{if(!0===function(e){return"SCRIPT"===e.tagName}(e))e.parentNode.replaceChild(function(e){const t=document.createElement("script");t.text=e.innerHTML;let n=0;const o=e.attributes;let r;for(;n<o.length;)t.setAttribute((r=o[n]).name,r.value),n+=1;return t}(e),e);else{let t=0;const n=e.childNodes;for(;t<n.length;)Bn(n[t]),t+=1}return e},Gn=e=>{const t=(e=>{const t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild})(e);return document.body.appendChild(t),t},$n=e=>{document.querySelectorAll(e).forEach((e=>{e.parentNode.removeChild(e)}))},Un=e=>{e?document.querySelectorAll("html,body").forEach((e=>{e.classList.add("popin-gdpr-no-scroll")})):document.querySelectorAll("html,body").forEach((e=>{e.classList.remove("popin-gdpr-no-scroll")}))},Hn=()=>{const{applicationVars:e}=window.lmd||{};return e?{platformName:e.platformName?String(e.platformName):null,platformVersion:e.platformVersion?String(e.platformVersion):null,deviceType:e.deviceType?String(e.deviceType):null,appVersion:e.appVersion?String(e.appVersion):null,appName:(d.content||{}).analyticsName||null}:{}},Qn=$();let qn=null,Kn=null;const zn={analytics:!1,ads:!1,personalization:!1,mediaPlatforms:!1,social:!1},Jn={ads:5,analytics:2,personalization:4,mediaPlatforms:!1,social:3},Wn=()=>{if(void 0!==d.consent&&void 0!==d.consent.lmdConsent)return d.consent.lmdConsent;if(!qn&&(c(`get consent from cookie ${N()}`),qn=Qn.get(N()),qn&&"telerama"===d.identifier)){Xn().ads||eo()<(Date.now()-2592e6)/1e3&&(qn=null,d.modules.standard.tpl="/html/telerama/wall.html")}return qn},Yn=()=>void 0!==d.consent&&void 0!==d.consent.consentString?d.consent.consentString:(Kn||(c(`get tcf consent string from cookie ${B()}`),Kn=Qn.get(B())),Kn),Zn=()=>!!Wn()&&!!Yn(),Xn=()=>Zn()?Wn().purposes:zn,eo=()=>Zn()&&Wn().timestamp||!1,to=()=>{const e=eo();if(e){const t=new Date(1e3*e);return`Le ${t.toLocaleDateString()}  ${t.toLocaleTimeString()}`}return!1},no=()=>Zn()&&Wn().userId||!1,oo=e=>{const t={displayMode:d.displayMode,template:d.modules[d.displayMode].tpl,entryPoint:d.entryPoint,debug:i(),...Hn()};"string"==typeof e?t.expression=e:(t.expression="partial",t.purposes=e);let n=`https://${d.hosts.cmp}/api/consent`;return""!==d.cookiePrefix&&(n=`${n}?cp=${d.cookiePrefix}`),fetch(n,{credentials:"include",method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((e=>(Fn.update(e.consentString,!1),e)))},ro=e=>{oo("acceptAll").then((()=>{"function"==typeof e&&e(),ao(),Dn(Xn()),Nn(Xn())}))},io=e=>{oo("denyAll").then((()=>{"function"==typeof e&&e(),ao(),Dn(Xn()),Nn(Xn())}))},so=(e,t)=>{e.hasAttribute(t)&&(e.setAttribute("type","text/javascript"),e.setAttribute("src",e.getAttribute(t)),e.removeAttribute(t))},ao=()=>{c("loadContent");const e=Xn();e.essential=!0,"object"==typeof e&&Object.keys(e).forEach((t=>{!0===e[t]&&(e=>{if(e){const t=document.querySelectorAll(`[data-iub-purposes="${e}"]`);for(let e=0;e<t.length;e+=1)so(t[e],"data-suppressedsrc")}})(Jn[t]||!1);const n=document.querySelectorAll(`[data-gdpr-purposes="${t}"]`);let o,r;for(c(`Find ${n.length} node(s) for purpose ${t}`),o=0;o<n.length;o+=1)r=n[o],r.hasAttribute("data-gdpr-src")&&!0===e[t]&&("huffpost"===d.identifier&&r.getAttribute("data-gdpr-src").indexOf("https://www.googletagmanager.com/gtag/js")>-1?r.setAttribute("data-gdpr-warning","Script blacklisted by CMP - loading abort"):so(r,"data-gdpr-src")),r.hasAttribute("data-gdpr-no-consent-src")&&!1===e[t]&&so(r,"data-gdpr-no-consent-src"),r.hasAttribute("data-gdpr-inline")&&!0===e[t]&&("huffpost"===d.identifier&&r.innerHTML.indexOf("https://www.google-analytics.com/analytics.js")>-1?r.innerHTML=`/* Inline script blacklisted by CMP - loading abort */\n            ${r.innerHTML}`:(r.setAttribute("type","application/javascript"),Bn(r)))}))},co=["Botify","Mozilla/5.0 (compatible; botify; http://botify.com)","Mozilla/5.0 Mobile (compatible; botify; http://botify.com)","APIs-Google (+https://developers.google.com/webmasters/APIs-Google.html)","Mediapartners-Google","Mozilla/5.0 (Linux ; Android 5.0 ; SM-G920A) AppleWebKit (KHTML, like Gecko) Chrome Mobile Safari (compatible ; AdsBot-Google-Mobile ; +http://www.google.com/mobile/adsbot.html)","Mozilla/5.0 (iPhone ; CPU iPhone OS 9_1, like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1 (compatible ; AdsBot-Google-Mobile ; +http://www.google.com/mobile/adsbot.html)","AdsBot-Google (+http://www.google.com/adsbot.html)","Googlebot-Image/1.0","Googlebot-News","Googlebot-Video/1.0","Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","Googlebot/2.1 (+http://www.google.com/bot.html)","(compatible; Mediapartners-Google/2.1; +http://www.google.com/bot.html)","AdsBot-Google-Mobile-Apps","Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.118 Safari/537.36 (compatible; Google-Read-Aloud;  +https://support.google.com/webmasters/answer/1061943)","Mozilla/5.0 (Linux; Android 7.0; SM-G930V Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.125 Mobile Safari/537.36 (compatible; Google-Read-Aloud; +https://support.google.com/webmasters/answer/1061943)","Mozilla/5.0 (Linux; Android 4.2.1; en-us; Nexus 5 Build/JOP40D) AppleWebKit/535.19 (KHTML, like Gecko; googleweblight) Chrome/38.0.1025.166 Mobile Safari/535.19","Mozilla/5.0 (compatible; Qwant-news/2.0; +https://www.qwant.com/)"],uo=["compatible; Googlebot/2.1; +http://www.google.com/bot.html","GTmetrix","Google Page Speed","DareBoost","Chrome-Lighthouse","PTST"];var lo=()=>co.indexOf(navigator.userAgent)>-1||!!uo.some((e=>navigator.userAgent.indexOf(e)>-1));const po=(e,t,n,o)=>{let r,i="";function s(e,t){return e=null!=(e=e[(t=t.pop?t:t.split(".")).shift()])?e:"",0 in t?s(e,t):e}t=Array.isArray(t)?t:t?[t]:[],t=o?0 in t?[]:[1]:t;for(r=0;r<t.length;r++){let o,a="",c=0,u="object"==typeof t[r]?t[r]:{};u={...n,...u},u[""]={"":t[r]},e.replace(/([\s\S]*?)({{((\/)|(\^)|#)(.*?)}}|$)/g,((e,t,n,r,l,p,d)=>{c?a+=c&&!l||c>1?e:t:(i+=t.replace(/{{{(.*?)}}}|{{(!?)(&?)(>?)(.*?)}}/g,((e,t,n,o,r,i)=>t?s(u,t):o?s(u,i):r?po(s(u,i),u):n?"":new Option(s(u,i)).innerHTML)),o=p),l?--c||(d=s(u,d),/^f/.test(typeof d)?i+=d.call(u,a,(e=>po(e,u))):i+=po(a,d,u,o),a=""):++c}))}return i},fo=e=>{const t=d.content||{};return t.hosts=d.hosts,t.siteName=t.siteName||"",t.deName=t.deName||`de ${t.siteName}`,t.aName=t.aName||` ${t.siteName}`,t.hasIdentity=!!no()&&!!eo()&&!!to(),t.consent={userId:no(),timestamp:eo(),date:to()},Object.keys(t.vendors||{}).forEach((e=>{t.vendors[`has${e.charAt(0).toUpperCase()}${e.slice(1)}`]=!0})),po(e,t)},ho=(e,t)=>{const n=[],o=(e,t)=>e.map((e=>t[e].name));return Object.values(t).sort(((e,t)=>{const n=e.name.toLowerCase(),o=t.name.toLowerCase();return n<o?-1:n>o?1:0})).forEach((t=>{t.cookieDuration=t.cookieMaxAgeSeconds>0&&(e=>{let t,n;return e>=31536e3?(t=Math.round(e/3600/24/365),n="an"):e>=86400?(t=Math.round(e/3600/24),n="jour"):e>=3600?(t=Math.round(e/3600),n="heure"):e>=60?(t=Math.round(e/60),n="minute"):(t=e,n="seconde"),t>1&&(n+="s"),`${t} ${n}`})(t.cookieMaxAgeSeconds),t.cookieDurationSeconds=`${t.cookieMaxAgeSeconds} seconde`,t.cookieMaxAgeSeconds>1&&(t.cookieDurationSeconds+="s"),t.hasUses=t.usesCookies||t.usesNonCookieAccess,t.hasPurposes=t.purposes.length>0||t.legIntPurposes.length>0,t.purposesList=o(t.purposes,e.purposes),t.legIntPurposesList=o(t.legIntPurposes,e.purposes),t.hasMoreList=t.specialFeatures.length>0||t.specialPurposes.length>0||t.features.length>0,t.featuresList=o(t.features,e.features),t.specialPurposesList=o(t.specialPurposes,e.specialPurposes),t.specialFeaturesList=o(t.specialFeatures,e.specialFeatures),n.push(t)})),n};let mo,go,yo=!1;void 0!==document.hidden?(mo="hidden",go="visibilitychange"):void 0!==document.msHidden?(mo="msHidden",go="msvisibilitychange"):void 0!==document.webkitHidden&&(mo="webkitHidden",go="webkitvisibilitychange");const vo=(e,t)=>{fetch(e).then((e=>e.json())).then((e=>{v((()=>{t(e)}))}))},bo=()=>{document[mo]||!1!==yo||(c("visibility visible, fetch impression"),Eo(),yo=!0)},_o=()=>{c(`collect impression ${d.modules[d.displayMode].tpl}`);let e=`https://${d.hosts.cmp}/api/impression`;""!==d.cookiePrefix&&(e=`${e}?cp=${d.cookiePrefix}`),fetch(e,{credentials:"include",method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({template:d.modules[d.displayMode].tpl,entryPoint:d.entryPoint,debug:i(),...Hn()})})},Eo=()=>{void 0===document.addEventListener||void 0===document[mo]?_o():document[mo]?(c("visibility hidden, wait for visibilitychange to fetch impression"),document.addEventListener(go,bo,!1)):_o()},Co=e=>{c(`collect action ${e}`),fetch(`https://${d.hosts.cmp}/api/action`,{credentials:"include",method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({template:d.modules[d.displayMode].tpl,action:e})})};function wo(e={}){const t=w();t&&t.publisher&&(t.privacy&&null===t.privacy.getVisitorMode()&&t.privacy.setVisitorMode("cnil","exempt"),t.publisher.set(e),t.dispatch())}function Ao(e={}){const t=w();t&&t.publisher&&t.publisher.send(e)}function So(){return window.pa}const Oo={AD:"display",AC:"display",AT:"display",SEC:"sl",EPR:"email",EREC:"email",ES:"email",AL:"affiliate"};function Io(){const e=Lo();if(e&&"none"!==e){const[t,n,...o]=e.split("-");if(Oo[t]&&n)return{lmd_medium:Oo[t],lmd_campaign:n,lmd_creation:o?o.join("-"):o}}return{}}const Lo=e=>Po("xtor",e)||"none",Po=(e,t)=>{const n=t||document.location.href,o=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),r=new RegExp(`[\\?&#]${o}=([^&#]*)`).exec(n);return null==r?null:decodeURIComponent(r[1])};function Mo(){const e=new URLSearchParams(decodeURIComponent(window.location.search)),t=new URLSearchParams(decodeURIComponent(window.location.hash).replace("#","?")),n={...Io()},o="lmd_";return t.forEach(((e,t)=>{if(To(t,o)){const o=t.split("_")[1];n[`src_${o}`]=e}})),e.forEach(((e,t)=>{if(To(t,o)){const o=t.split("_")[1];n[`src_${o}`]=e}})),r=n,0===Object.keys(r).length&&r.constructor===Object?null:n;var r}function To(e,t="lmd_"){return 0===e.indexOf(t)}const Vo="src.force",ko="publisher.impression",Fo="publisher.click",jo=[];function Ro(){const e=Mo();e&&xo(Vo,{src_force:!0,...e})}function Do(e={}){xo(ko,{onsitead_type:"Publisher",...e})}function No(e={}){xo(Fo,{onsitead_type:"Publisher",...e})}function xo(e,t){const n=So();n?(a(`[Piano] - Send sync command -> sendEvent | Event name -> ${e} (w/ ${JSON.stringify(t)})`),n.sendEvent(e,t)):function(e,t){jo.push(["sendEvent",e,t]),a(`[Piano] - Push sendEvent -> ${e}`)}(e,t)}function Bo(e){jo.push(["privacy.setMode",e]),a(`[Piano] - Push privacy -> ${e}`)}function Go(e){const t=w(),n={impression:{campaignId:e||qo(),...d.abtests.variantName&&{variant:`[${d.abtests.variantName.replace(/-/g,"_")}]`}}};if(f()){Do({onsitead_campaign:(e||qo()||"").replace("[","").replace("]","").trim(),...d.abtests.variantName&&{onsitead_variant:d.abtests.variantName}})}else t?wo(n):A(wo.bind(null,n))}function $o(){Qo("[accepter]")}function Uo(){Qo("[refuser]")}function Ho(){Qo("[parametrer]")}function Qo(e,t){const n=w(),o={click:{campaignId:t||qo(),creation:e,...d.abtests.variantName&&{variant:`[${d.abtests.variantName.replace(/-/g,"_")}]`}}};if(f()){const n=e;No({onsitead_campaign:(t||qo()||"").replace("[","").replace("]","").trim(),onsitead_creation:n.replace("[","").replace("]","").trim(),...d.abtests.variantName&&{onsitead_variant:d.abtests.variantName}})}else n?Ao(o):A(Ao.bind(null,o))}function qo(){return{cookiewall:"[cookie wall]",standard:"[cmp standard]",subscriber:"[cmp abo]"}[d.displayMode]}function Ko(){const e=w();if(e&&e.privacy){const{name:t}=e.privacy.getVisitorMode()||{};if("optout"===t)return;"optin"!==t&&e.privacy.setVisitorOptin()}}function zo(){const e=w();if(e&&e.privacy){const{name:t}=e.privacy.getVisitorMode()||{};if("optout"===t)return;"exempt"!==t&&e.privacy.setVisitorMode("cnil","exempt")}}function Jo(){const e=w();if(e&&e.setProps){const t=Wo();t&&e.setProps({xto:t,"b:src_force":"true"},!0)}}document.addEventListener("lmdPianoLoaded",(function(){const e=window?._pac?.queueVarName||window?.GDPR_CONFIG?.usePianoQueue||"_paq";window[e]=window[e]||[];for(let t=0;t<jo.length;t+=1)a(`[Piano] - Send async command -> ${jo[t][0]} | Event name -> ${jo[t][1]} (w/ ${JSON.stringify(jo[t][2])})`),window[e].push(jo[t])}));const Wo=e=>Yo("xtor",e)||"none",Yo=(e,t)=>{const n=t||document.location.href,o=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),r=new RegExp(`[\\?&#]${o}=([^&#]*)`).exec(n);return null==r?null:decodeURIComponent(r[1])};function Zo(e,t){const n=e||function(e){let t=null;if(e){const n=Object.keys(e),o=[];for(let t=0;t<n.length;t+=1)if(!0===e[n[t]]){const e=Xo(n[t]);e&&o.push(e)}t=o.join(" / "),o.length===n.length?t="tout_accepter":0===o.length&&(t="tout_refuser")}return t}(t);if(f()){No({onsitead_campaign:"gestion cookies",onsitead_creation:n})}else{!function(e={}){const t=w();t&&t.click.send(e)}({name:n,chapter1:"cookies",type:"action"})}}function Xo(e){return{analytics:"analytics",ads:"pub",personalization:"perso",mediaPlatforms:"medias",social:"sociaux"}[e]}let er,tr;const nr=({target:e})=>{e&&g(e,"[data-gdpr-action=close]")&&(rr(),"function"==typeof tr&&tr())},or=()=>{if(er){const e=er.querySelector("[name=gdpr-partners-search]");e&&e.addEventListener("keyup",((e,t=200)=>{let n;return(...o)=>{clearTimeout(n),n=setTimeout((()=>{e.apply(window,o)}),t)}})((()=>{er.querySelectorAll("[data-gdpr-vendor]").forEach((t=>{""===e.value||t.getAttribute("data-gdpr-vendor").toLowerCase().indexOf(e.value.toLowerCase())>-1?t.style.display="block":t.style.display="none"}))})))}},rr=()=>{er&&er.removeEventListener("click",nr),$n(`.${d.modules.partners.name}`),Un(!1)},ir=e=>{c("render partners"),tr=e,vo(`https://${d.hosts.cmp}${d.modules.partners.tpl}?css=${d.modules.partners.css}`,(e=>{Un(!0);const t=[];t.push(fetch(`https://${d.hosts.cmp}/vendor-list.json`).then((e=>e.json()))),"fr"===d.lang&&t.push(fetch(`https://${d.hosts.cmp}/purposes-fr.json`).then((e=>e.json()))),Promise.all(t).then((t=>{$n(".gdpr-glm-loader");const{vendors:n}=t[0],o=t[1]??t[0];er=Gn(((e,t,n)=>{const o={vendors:[]};return o.vendors=ho(t,n),po(e,o)})(e.html,o,n)),xn(d.modules.partners.name,e.css),er&&er.addEventListener("click",nr),or()}))}))},sr="optin",ar="exempt",cr="optout";function ur(){const e=So();if(e&&e.privacy){if(e.privacy.getMode()===cr)return;e.privacy.setMode(sr)}else Bo(sr)}function lr(){const e=So();if(e&&e.privacy){if(e.privacy.getMode()===cr)return;e.privacy.setMode(ar)}else Bo(ar)}let pr,dr;const fr=({target:e})=>{if(e){if(g(e,"[data-gdpr-expression=acceptAll]")&&ro((()=>{Zo("tout_accepter"),Ko(),ur(),!0===d.content.paramsRefresh?document.location.reload():hr()})),g(e,"[data-gdpr-expression=denyAll]")&&io((()=>{Zo("tout_refuser"),zo(),lr(),!0===d.content.paramsRefresh?document.location.reload():hr()})),g(e,"[data-gdpr-action=save]")){const e={};document.querySelectorAll("[data-gdpr-params-purpose]").forEach((t=>{e[t.getAttribute("data-gdpr-params-purpose")]=t.checked})),((e,t)=>{oo(e).then((()=>{"function"==typeof t&&t(),ao(),Dn(Xn()),Nn(Xn())}))})(e,(()=>{Zo(null,e),function(){const e=Xn();e&&(!0===e.analytics?Ko():zo())}(),function(){const e=Xn();e&&(!0===e.analytics?ur():lr())}(),!0===d.content.paramsRefresh?document.location.reload():hr()}))}g(e,"[data-gdpr-action=cancel]")&&(Zo("annuler"),hr(),"function"==typeof dr&&dr()),g(e,"[data-gdpr-action=partners]")&&(hr(),ir((()=>{mr(dr)})))}},hr=()=>{pr&&pr.removeEventListener("click",fr),$n(`.${d.modules.parameters.name}`),Un(!1)},mr=e=>{c("render parameters"),e||d.setEntryPoint("parameters"),dr=e,vo(`https://${d.hosts.cmp}${d.modules.parameters.tpl}?css=${d.modules.parameters.css}`,(e=>{Un(!0),pr=Gn(fo(e.html)),xn(d.modules.parameters.name,e.css);const t=Xn();Object.keys(t).forEach((e=>{document.querySelector(`[data-gdpr-params-purpose=${e}]`)&&(document.querySelector(`[data-gdpr-params-purpose=${e}]`).checked=t[e])})),function(){if(f())Do({onsitead_campaign:"gestion cookies"});else{const e=w();e&&(e.page.reset(),e.page.set({name:"gestion",level2:"",chapter1:"cookies",chapter2:"",chapter3:""}),e.dispatch())}}(),pr&&pr.addEventListener("click",fr)}))},gr=()=>{$n(`.${d.modules.cookiewall.name}`),Un(!1)},yr=e=>{c("render wall"),d.setEntryPoint("cookiewall");const t=o(document.location.host,d?.wall?.blacklist||!1);a(`is blacklisted page for wall ? ${t}`),!0!==t&&vo(`https://${d.hosts.cmp}${d.modules.cookiewall.tpl}?css=${d.modules.cookiewall.css}`,(e=>{a("toggleBodyScroll"),Un(!0),a("nodeScriptReplace"),Bn(Gn(fo(e.html))),a("injectStyle"),xn(d.modules.cookiewall.name,e.css),a("sendCmpPublisherImpression"),Go(),a("handleEvents"),document.querySelector("[data-gdpr-expression=acceptAll]").addEventListener("click",(()=>{ro((()=>{ur(),Ko(),Ro(),Jo(),$o(),gr()}))})),document.querySelector("[data-gdpr-action=settings]")?.addEventListener("click",(()=>{Ho(),gr(),mr(yr)})),document.querySelector("[data-gdpr-action=partners]")?.addEventListener("click",(()=>{gr(),ir((()=>{yr()}))})),document.querySelector("[data-gdpr-action=partners2]")?.addEventListener("click",(()=>{gr(),ir((()=>{yr()}))})),document.querySelector(".js-gdpr-offers")?.addEventListener("click",(()=>{Co("subscribe"),Qo("[abonnement]")})),document.querySelector(".js-gdpr-login")?.addEventListener("click",(()=>{Co("login"),Qo("[connexion]")})),document.querySelector(".js-gdpr-deny-subscribe")?.addEventListener("click",(()=>{Uo()})),document.addEventListener("denyAllAfterSubscribe",(()=>{io((()=>{Uo(),zo(),lr(),gr()}))})),a("collectImpression"),Eo()}))};let vr=!1;const br=({target:e})=>{e&&(g(e,"[data-gdpr-expression=acceptAll]")&&ro((()=>{ur(),Ko(),Ro(),Jo(),$o(),_r()})),g(e,"[data-gdpr-expression=denyAll]")&&io((()=>{Uo(),zo(),lr(),_r()})),g(e,"[data-gdpr-action=settings]")&&(Ho(),_r(),mr(Cr)),g(e,"[data-gdpr-action=partners]")&&(_r(),ir(Cr)))},_r=()=>{vr&&vr.removeEventListener("click",br),$n(`.${d.modules.standard.name}`),Un(!1)},Er=()=>{const e=document.getElementById("js-gdpr-glm-standard-telerama");(function(){const e=window,t=document,n=t.documentElement,o=t.getElementsByTagName("body")[0],r=e.innerHeight||n.clientHeight||o.clientHeight;return{width:e.innerWidth||n.clientWidth||o.clientWidth,height:r}})().width<768&&window.addEventListener("resize",(()=>{e&&e.clientHeight!==window.innerHeight&&(e.style.height=`${window.innerHeight}px`)}))},Cr=()=>{c("render standard"),d.setEntryPoint("standard"),vo(`https://${d.hosts.cmp}${d.modules.standard.tpl}?css=${d.modules.standard.css}`,(e=>{Un(!0),vr=Gn(fo(e.html)),xn(d.modules.standard.name,e.css),Go(),vr&&vr.addEventListener("click",br),Eo(),Er()}))};let wr=!1;const Ar=({target:e})=>{e&&(g(e,"[data-gdpr-expression=acceptAll]")&&ro((()=>{ur(),Ko(),Ro(),Jo(),$o(),Sr()})),g(e,"[data-gdpr-expression=denyAll]")&&io((()=>{Uo(),zo(),lr(),Sr()})),g(e,"[data-gdpr-action=settings]")&&(Ho(),Sr(),mr(Or)))},Sr=()=>{wr&&wr.removeEventListener("click",Ar),$n(`.${d.modules.subscriber.name}`)},Or=()=>{c("render subscriber"),d.setEntryPoint("subscriber"),vo(`https://${d.hosts.cmp}${d.modules.subscriber.tpl}?css=${d.modules.subscriber.css}`,(e=>{wr=Gn(fo(e.html)),xn(d.modules.subscriber.name,e.css),Go(),wr&&wr.addEventListener("click",Ar),Eo()}))};let Ir;const Lr=({target:e})=>{e&&(g(e,"[data-gdpr-action=remove]")&&(Qn.remove(N(),{path:"/",domain:`.${t(document.location.hostname)}`}),Qn.remove(B(),{path:"/",domain:`.${t(document.location.hostname)}`}),Qo("[retirer]","[retrait consentement]"),zo(),lr(),document.location.reload()),g(e,"[data-gdpr-action=cancel]")&&(Qo("[annuler]","[retrait consentement]"),Pr()),g(e,".js-gdpr-remove-offers")&&Qo("[abonnement]","[retrait consentement]"))},Pr=()=>{Ir&&Ir.removeEventListener("click",Lr),$n(`.${d.modules.remove.name}`),Un(!1)},Mr=()=>{c("render remove-consent"),d.setEntryPoint("remove-consent"),vo(`https://${d.hosts.cmp}${d.modules.remove.tpl}?css=${d.modules.remove.css}`,(e=>{Un(!0),Ir=Gn(fo(e.html)),xn(d.modules.remove.name,e.css),Go("[retrait consentement]"),Ir&&Ir.addEventListener("click",Lr)}))};return v((()=>c("DOM is ready"))),d.override(h),d.overrideFromQueryString(),(e=>{(()=>{a("init abtest debug ");const e=n("gdpr_displayMode");!1!==e?a(`abtest debug - detect gdprMode -> ${e} -> abort abtest init`):"standard"===d.displayMode||(Q.length>0&&(d.abtests.token=z(),a(`abtest debug - is there variant matching ${d.abtests.token} ?`),Q.forEach((e=>!1===q&&(a(`abtest debug - check variant ${e.key} with tokens ${e.tokens.toString()}`),e.tokens.indexOf(d.abtests.token)>-1&&(a(`abtest debug - find matching variant -> ${e.key}`),q=e),!0)))),!1!==q&&(d.displayMode=q.displayMode,d.abtests.variantName=q.name,d.setTemplate(q.tpl)))})();const t=o(document.location.host,d?.blacklistedHost||!1);if(a(`check blacklisted host in bootstrap => ${t}`),!0===t)v((()=>{c("load script for each purposes for a blacklisted host"),ao(),Dn(Xn())}));else if(Zn())c("consent found"),Fn.update(Yn(),!1),v((()=>{c("load script for each purposes"),ao(),Dn(Xn())}));else{c("no consent found");const t=lo();c(`is bot ? -> ${t}`);const n=((e,t)=>{if("object"!=typeof t)return!1;const n=t.filter((e=>"string"==typeof e)),o=t.filter((e=>"object"==typeof e&&e instanceof RegExp));return n.indexOf(e)>-1||o.some((t=>t.test(e)))})(document.location.pathname,d?.blacklistedPath||!1);if(a(`is isblacklistedPath ? -> ${n}`),!t&&!n)if(!0===e)switch(c(`displayMode = ${d.displayMode}`),d.displayMode){case"cookiewall":yr();break;case"standard":Cr();break;case"subscriber":Or();break;case"none":break;default:u(`invalid display mode: ${d.displayMode}`)}else switch(d.displayMode){case"standard":Cr();break;case"none":break;default:u(`invalid display mode: ${d.displayMode}`)}}y(document,"click",".gdpr-cs-remove-consent-link",(e=>{e.preventDefault(),Mr()})),y(document,"click",".gdpr-cs-parameters-link",(e=>{e.preventDefault(),"cookiewall"===d.displayMode?Mr():mr()})),y(document,"click",".iubenda-cs-preferences-link",(e=>{e.preventDefault(),"cookiewall"===d.displayMode?Mr():mr()})),y(document,"click",".gdpr-cs-manage-consent-link",(e=>{e.preventDefault(),"cookiewall"===d.displayMode?Mr():mr()}))})(!0),e.checkPaypalSubscription=(e,t,n)=>{fetch(`https://${d.hosts.cmp}/api/paypal/reconnect`,{credentials:"include",method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:e})}).then((e=>{e.ok?(t(),c("OK")):(n(),u("Subscription id not found"))})).catch((e=>{n(),u(`Something went wrong with fetch: ${e.message}`)}))},e.configuration=d,e.getPurposes=Xn,e.hasConsent=Zn,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=huffpost.min.js.map
