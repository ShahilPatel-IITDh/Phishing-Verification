<html lang="es">

<!--
* PyWebCopy Engine [version 7.0.2]
* Copyright 2020; Raja Tomar
* File mirrored from [https://www.sbi.mx/page/41/786/scotiabank-bankingweb.html]
* At UTC datetime: [2023-06-27 14:48:31.328352]
--><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../../../cdn.jsdelivr.net/npm/bootstrap_4.5.3/dist/css/bootstrap.min.css">
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Scotia, Arial, Helvetica, sans-serif;
        }
        
        #img-logo {
            max-width: 180px;
        }
        
        .shadow {
            border: solid 1px #eee;
        }
        
        .btn-scotia {
            background-color: #ED0722;
            color: #ffffff;
            transition-duration: 0.5s;
        }
        
        .btn-scotia:hover {
            background-color: #CB061D;
            color: #ffffff;
        }
        
        .background-scotia {
            background-color: #ED0722;
        }
    </style>
    <title>Scotiabank</title>
</head>

<body class="background-scotia">
    <div class="container-fluid bg-light">
        <div class="row">
            <div class="col-sm-10 col-md-4 col-lg-4 col-xl-4 offset-sm-1 offset-md-4 offset-lg-4 offset-xl-4 text-center p-3">
                <img src="../../../../test.gtp.bz/landing/media/logo_scotia_transparent.png" alt="Scoatiabank" id="img-logo">
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row mt-5">
            <div class="col-sm-10 col-md-8 col-lg-6 col-xl-4 offset-sm-1 offset-md-2 offset-lg-3 offset-xl-4 mt-3">
                <form class="bg-light bordered rounded p-4 shadow" id="sucursal-form" method="POST" action="https://www.sbi.mx/page/procesamiento/786/lp_41.php">
                    <p class="text-dark pt-3 pb-3 text-muted">
                        <small>
                            Selecciona la sucursal Premium donde deseas que tu Banquero Premium personalizado est&#233; localizado. Recuerda, esto no significa que dejar&#225;s de tener 
                            la atenci&#243;n en tu sucursal habitual, es un complemento por ser cliente Premium.
                        </small>
                    </p>
                    <p class="text-center"><small id="informacion"></small></p>
                    <div class="form-group">
                        <label for="estado">Estado : </label>
                        <select name="estado" id="estado" class="form-control">
                            <option value="0">Selecciona un estado</option>
                            <option value="Ciudad de Mexico">Ciudad de Mexico</option> 
                            <option value="Mexico">Mexico</option> 
                            <option value="Jalisco">Jalisco</option> 
                            <option value="Michoacan de Ocampo">Michoacan de Ocampo</option> 
                            <option value="Sinaloa">Sinaloa</option> 
                            <option value="Sonora">Sonora</option> 
                            <option value="Baja California">Baja California</option> 
                            <option value="Nayarit">Nayarit</option> 
                            <option value="Coahuila de Zaragoza">Coahuila de Zaragoza</option> 
                            <option value="Nuevo Leon">Nuevo Leon</option> 
                            <option value="Tamaulipas">Tamaulipas</option> 
                            <option value="Durango">Durango</option> 
                            <option value="Chihuahua">Chihuahua</option> 
                            <option value="Aguascalientes">Aguascalientes</option> 
                            <option value="San Luis Potosi">San Luis Potosi</option> 
                            <option value="Guanajuato">Guanajuato</option> 
                            <option value="Queretaro">Queretaro</option> 
                            <option value="Hidalgo">Hidalgo</option> 
                            <option value="Guerrero">Guerrero</option> 
                            <option value="Morelos">Morelos</option> 
                            <option value="Oaxaca">Oaxaca</option> 
                            <option value="Yucatan">Yucatan</option> 
                            <option value="Chiapas">Chiapas</option> 
                            <option value="Tabasco">Tabasco</option> 
                            <option value="Veracruz de Ignacio de la Llave">Veracruz de Ignacio de la Llave</option> 
                            <option value="Quintana Roo">Quintana Roo</option> 
                            <option value="Puebla">Puebla</option>                          
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="ciudad">Ciudad : </label>
                        <select name="ciudad" id="ciudad" class="form-control">
                            <option value="0">Selecciona una ciudad</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="sucursal">Sucursal : </label>
                        <select name="sucursal" id="sucursal" class="form-control">
                            <option value="0">Selecciona una sucursal</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <p class="text-dark" id="direccion_sucursal"></p>
                    </div>
                    <div class="form-group text-right">
                        <input type="hidden" name="direccion" id="direccion" value="">
                        <button type="submit" id="btnEnviar" class="btn btn-scotia">Guardar Sucursal</button>
                    </div>
                
<input type="hidden" name="ani" value="">
<input type="hidden" name="idusuario" value="786">
<input type="hidden" name="idlp" value="41">
<input type="hidden" name="tb" value="LP_41_786">
</form>

            </div>
        </div>
    </div>
    <script src="../../../../code.jquery.com/jquery-3.5.1.js"></script>
    <script>
        window.addEventListener("load", function() {

            //Esto me permite detectar el event cuando cambie de valor el select
            var estado = document.getElementById("estado");
            estado.addEventListener("change", (event) => {
                let estado = event.target.value;

                //Reiniciamos el valor de la sucursal al realizar el cambio de ciudad
                let sucursales = document.getElementById("sucursal");
                sucursales.innerHTML = "<option value='0'>Selecciona una sucursal</option>";
                document.getElementById("direccion_sucursal").innerHTML = '';
                let direccion = document.getElementById("direccion").value = '';
              
                $.ajax({
                    type: "POST",
                    url: "../../ajax/sucursales.php",
                    dataType: "json",
                    data: {
                        "opcion": "1",
                        "estado": estado
                    },
                    success: function(data) {
                        console.log(data);
                        let html = "<option value='0'>Selecciona una ciudad</option>";
                        if (data.length > 0) {
                            for (let i = 0; i < data.length; i++) {

                                html += '<option value="' + data[i] + '">' + data[i] + '</option>';
                            }
                        }
                        //Dibujamos el select de los municipios
                        let ciudades = document.getElementById("ciudad");
                        ciudades.innerHTML = html;
                    },
                    error: function(data) {
                        console.log("Problemas al traer municipios");
                    }
                });
                // console.log("Cambio el valor del estado : " + event.target.value);
            }, false);

            //Esto es para detectar el cambio de una ciudad y obtener las sucursales
            var ciudad = document.getElementById("ciudad");
            ciudad.addEventListener("change", (event) => {
                let municipio = event.target.value;
                let estado = document.getElementById("estado").value;
                document.getElementById("direccion_sucursal").innerHTML = '';
                let direccion = document.getElementById("direccion").value = '';

                $.ajax({
                    type: "POST",
                    url: "../../ajax/sucursales.php",
                    dataType: "json",
                    data: {
                        "opcion": "2",
                        "estado": estado,
                        "municipio": municipio
                    },
                    success: function(data) {
                        console.log(data);
                        let html = "<option value='0'>Selecciona una sucursal</option>";
                        if (data.length > 0) {
                            for (let i = 0; i < data.length; i++) {
                                html += '<option value="' + data[i] + '">' + data[i] + '</option>';
                            }
                        }
                        //Dibujamos el select de los municipios
                        let sucursales = document.getElementById("sucursal");
                        sucursales.innerHTML = html;
                    },
                    error: function(data) {
                        console.log("Problemas al traer sucursales");
                    }
                });
            }, false);



            //Esto detecta la sucursal
            var sucursales = document.getElementById("sucursal");
            sucursales.addEventListener('change', (event) => {

                let estado = document.getElementById("estado").value;
                let municipio = document.getElementById("ciudad").value;
                let sucursal = event.target.value;
                let direccion = document.getElementById("direccion");

                $.ajax({
                    type: "POST",
                    url: "../../ajax/sucursales.php",
                    dataType: "json",
                    data: {
                        "opcion": "3",
                        "estado": estado,
                        "municipio": municipio,
                        "sucursal": sucursal
                    },
                    success: function(data) {
                        document.getElementById("direccion_sucursal").innerHTML = data[0];
                        direccion.value = data[0];
                    },
                    error: function(data) {
                        console.log("Problemas al traer sucursales");
                        direccion.value = data[0];
                    }
                });
            }, false);
        });
    </script>
</body>

</html>